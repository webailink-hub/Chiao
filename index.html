<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiao-Hua Chang | Erhu Soloist / Vocals / Morin khuur / Educator </title>
    <meta name="description" content="Official portfolio of Chiao-Hua Chang, Erhu Soloist / Vocals / Morin khuur / Educator  based in Vienna.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@200;300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;500&display=swap" rel="stylesheet">

    <!-- Leaflet CSS for Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Leaflet JS for Map -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        stone: {
                            50: '#fafaf9',
                            100: '#f5f5f4',
                            200: '#e7e5e4',
                            300: '#d6d3d1',
                            400: '#a8a29e',
                            500: '#78716c',
                            600: '#57534e',
                            800: '#292524',
                            900: '#1c1917',
                            950: '#0c0a09',
                        },
                        paper: '#f2f0eb', // refined warm beige
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        chinese: ['Noto Serif TC', 'serif'],
                    },
                    letterSpacing: {
                        'widest-xl': '0.25em',
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(40px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            background-color: #f2f0eb; 
            color: #1c1917; 
            -webkit-font-smoothing: antialiased; 
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Noise Texture */
        .texture-overlay {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E");
            opacity: 0.08;
            mix-blend-mode: multiply;
            pointer-events: none;
            position: fixed;
            inset: 0;
            z-index: 50;
        }

        /* Custom Selection */
        ::selection {
            background: #292524;
            color: #f2f0eb;
        }

        /* Hero Video Styling */
        .hero-video-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .hero-video-wrapper video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }

        /* Reveal on Scroll Class */
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Navigation Hover Line */
        .nav-link::after {
            content: '';
            display: block;
            width: 0;
            height: 1px;
            background: currentColor;
            transition: width 0.3s;
            margin-top: 4px;
        }
        .nav-link:hover::after {
            width: 100%;
        }

        /* Smooth Anchor Scroll Offset */
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 100px;
        }

        /* Modal Transitions */
        #video-modal {
            transition: opacity 0.5s ease;
        }
        
        /* Leaflet Map Customization */
        .leaflet-popup-content-wrapper {
            border-radius: 0;
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            padding: 0;
        }
        .leaflet-popup-content {
            margin: 10px;
            line-height: 1.5;
        }
    </style>
</head>
<body class="overflow-x-hidden relative">

    <!-- Texture Background -->
    <div class="texture-overlay"></div>

    <!-- VIDEO MODAL (Hidden by default) -->
    <div id="video-modal" class="fixed inset-0 z-[100] bg-stone-900/95 backdrop-blur-md hidden flex flex-col items-center justify-center p-4 opacity-0">
        <!-- Close Button -->
        <button id="close-modal-btn" class="absolute top-6 right-6 z-[110] text-stone-400 hover:text-white transition-colors group flex items-center gap-2">
            <span class="text-[10px] uppercase tracking-widest hidden md:block opacity-0 group-hover:opacity-100 transition-opacity">Close</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        
        <!-- Video Container -->
        <div class="w-full max-w-6xl aspect-video bg-black shadow-2xl relative overflow-hidden mb-6">
             <iframe id="youtube-frame" class="w-full h-full" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>

        <!-- Fallback Link (In case of Embedding Restrictions) -->
        <a id="youtube-fallback-link" href="#" target="_blank" class="text-stone-400 hover:text-white text-[10px] uppercase tracking-widest border-b border-transparent hover:border-white transition-all pb-1 flex items-center gap-2">
            <span>Watch directly on YouTube</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
        </a>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-[60] px-6 py-6 md:px-12 md:py-8 flex justify-between items-center transition-all duration-300" id="navbar">
        <a href="#hero" class="text-2xl font-serif italic font-bold tracking-tighter text-stone-900 mix-blend-difference hover:opacity-70 transition-opacity z-50">C / C</a>
        
        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center gap-12 text-[11px] uppercase tracking-widest-xl font-medium text-stone-900 mix-blend-difference z-50">
            <a href="#about" class="nav-link">About</a>
            <a href="#works" class="nav-link">Works</a>
            <a href="#gallery" class="nav-link">Gallery</a>
            <a href="#live" class="nav-link">Live</a>
            <a href="#erhu" class="nav-link">The Erhu</a>
            <a href="#education" class="nav-link">Education</a>
            <a href="#contact" class="px-6 py-2 border border-stone-900 rounded-full hover:bg-stone-900 hover:text-stone-50 transition-colors duration-300">Contact</a>
        </div>

        <!-- Mobile Menu Button -->
        <button id="menu-toggle" class="md:hidden z-50 mix-blend-difference text-stone-900 uppercase text-xs tracking-widest">
            Menu
        </button>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 z-[55] bg-[#f2f0eb] flex flex-col items-center justify-center gap-8 translate-y-full transition-transform duration-700 ease-in-out">
        <a href="#about" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">About</a>
        <a href="#works" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">Works</a>
        <a href="#gallery" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">Gallery</a>
        <a href="#live" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">Live</a>
        <a href="#erhu" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">The Erhu</a>
        <a href="#education" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">Education</a>
        <a href="#contact" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors">Contact</a>
    </div>

    <!-- 1. HERO SECTION -->
    <section id="hero" class="relative h-[100dvh] w-full overflow-hidden flex items-center justify-center">
        <!-- Video Background -->
        <div class="hero-video-wrapper">
            <video autoplay muted loop playsinline poster="https://images.unsplash.com/photo-1511192336575-5a79af67a629?auto=format&fit=crop&q=80&w=2000">
                <source src="https://i.imgur.com/WfajINu.mp4" type="video/mp4">
            </video>
            
            <div class="absolute inset-0 bg-black/40"></div>
            <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"></div>
        </div>

        <div class="relative z-10 text-center px-4">
            <span class="block text-xs md:text-sm tracking-[0.4em] uppercase text-stone-300 mb-6 animate-fade-in-up">Vienna • Taiwan</span>
            
            <h1 class="text-6xl md:text-[9rem] leading-none font-serif italic text-white mb-6 animate-fade-in-up drop-shadow-2xl" style="animation-delay: 0.1s">
                Chiao-Hua<br/>Chang
            </h1>
            
            <p class="text-xs tracking-[0.3em] uppercase text-stone-200 mb-12 animate-fade-in-up" style="animation-delay: 0.2s">
                Erhu Soloist / Vocals / Morin khuur / Educator 
            </p>
            
            <div class="animate-fade-in-up flex flex-col md:flex-row gap-8 justify-center items-center" style="animation-delay: 0.3s">
                <a href="#about" class="group text-[11px] uppercase tracking-widest text-white/80 hover:text-white transition-colors pb-1 border-b border-transparent hover:border-white/50">
                    Enter Portfolio
                </a>
                <span class="hidden md:inline-block text-stone-500">•</span>
                <a href="#live" class="group text-[11px] uppercase tracking-widest text-white/80 hover:text-white transition-colors pb-1 border-b border-transparent hover:border-white/50">
                    View Schedule
                </a>
            </div>
        </div>
        <div class="absolute bottom-0 left-1/2 -translate-x-1/2 h-20 w-px bg-gradient-to-b from-transparent via-white/30 to-transparent animate-pulse"></div>
    </section>

    <!-- 2. BIOGRAPHY (ABOUT) -->
    <section id="about" class="py-32 md:py-48 px-6 md:px-12 max-w-screen-2xl mx-auto">
        <div class="grid lg:grid-cols-12 gap-12 items-start">
            
            <div class="lg:col-span-5 reveal">
                <div class="relative aspect-[3/4] overflow-hidden group">
                    <img src="https://i.imgur.com/LJBynVu.jpeg" 
                         class="w-full h-full object-cover transition-transform duration-[1.5s] ease-in-out group-hover:scale-105 filter sepia-[0.1] contrast-[0.95]" 
                         alt="Chiao-Hua Chang Portrait">
                    <div class="absolute bottom-4 left-4 text-white/80 text-[10px] uppercase tracking-widest z-10">Portrait 01 / Vienna</div>
                </div>
            </div>

            <div class="lg:col-span-6 lg:col-start-7 pt-12 lg:pt-24 space-y-12 reveal">
                <div>
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-6 flex items-center gap-3">
                        <span class="w-6 h-px bg-stone-400"></span> Biography
                    </h2>
                    <h3 class="text-4xl md:text-5xl lg:text-6xl font-serif leading-[1.15] text-stone-900">
                        Bridging continents through the resonance of two strings.
                    </h3>
                </div>

                <div class="text-lg md:text-xl font-light text-stone-600 leading-relaxed space-y-8">
                    <p>
                        Based in Vienna since 2013, Chiao-Hua Chang creates a unique sonic dialogue between Eastern tradition and Western innovation. With a Master's in Ethnomusicology, she navigates the space between classical discipline and avant-garde improvisation.
                    </p>
                    <p>
                        Her diverse portfolio spans from the Orchestra of Cultures to experimental jazz at Porgy & Bess. She challenges the boundaries of the Erhu, proving it is a living, breathing voice in contemporary music.
                    </p>
                </div>

                <div class="grid grid-cols-2 gap-8 pt-8 border-t border-stone-300/50">
                    <div>
                        <span class="block text-4xl font-serif text-stone-900 mb-2">25+</span>
                        <span class="text-[10px] uppercase tracking-widest text-stone-500">Years Teaching</span>
                    </div>
                    <div>
                        <span class="block text-4xl font-serif text-stone-900 mb-2">MA</span>
                        <span class="text-[10px] uppercase tracking-widest text-stone-500">Ethnomusicology</span>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- 3. SELECTED WORKS -->
    <section id="works" class="py-32 md:py-48 px-6 md:px-12 max-w-screen-2xl mx-auto bg-stone-100">
        <div class="flex flex-col md:flex-row justify-between items-end mb-24 reveal">
            <div>
                <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-4">Archive</h2>
                <h3 class="text-5xl md:text-7xl font-serif text-stone-900 mb-6">Selected Works</h3>
                <div class="space-y-2">
                    <p class="text-lg md:text-xl font-serif italic text-stone-600">Guided by two strings, journey across the world and explore life.</p>
                    <p class="text-lg md:text-xl font-chinese font-light text-stone-500">透過兩條弦，旅行世界，體驗人生。</p>
                </div>
            </div>
            <p class="text-stone-500 text-sm font-light mt-6 md:mt-0 max-w-md text-right">
                A curation of collaborations spanning jazz, theater, and classical arrangements.
            </p>
        </div>

        <!-- Discography Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 reveal">
            
            <!-- 1. Journey of Zyrus -->
            <div class="group cursor-pointer" onclick="openVideo('S0vfVuYH_3Q')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/S0vfVuYH_3Q/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="Journey of Zyrus">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">Journey of Zyrus</h4>
            </div>

            <!-- 2. A World Symphony -->
            <div class="group cursor-pointer" onclick="openVideo('QNVAUg52Las')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/QNVAUg52Las/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="A World Symphony">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">A World Symphony</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Orchester der Kulturen (℗ 2021 Universal Music MENA)</p>
            </div>

            <!-- 3. CULTURAL CONCEPT -->
            <div class="group cursor-pointer" onclick="openVideo('CZpTLy7Ee-4')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/CZpTLy7Ee-4/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="CULTURAL CONCEPT">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">CULTURAL CONCEPT</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Przemysław Strączek (Ⓒ ℗ 2022 Es Art)</p>
            </div>

            <!-- 4. Tiptoe Walking -->
            <div class="group cursor-pointer" onclick="openVideo('fr0FB7OPbhE')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/fr0FB7OPbhE/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="Tiptoe Walking">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">Tiptoe Walking</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Eldis LaRosa & Colores (© 2021)</p>
            </div>

             <!-- 5. Free Form -->
             <div class="group cursor-pointer" onclick="openVideo('YN7oQ3Z7eXE')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/YN7oQ3Z7eXE/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="Free Form">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">Free Form</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Schnittpunkte Festival</p>
            </div>

            <!-- 6. Outside -->
            <div class="group cursor-pointer" onclick="openVideo('wH0le3tV3KE')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/wH0le3tV3KE/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="Outside">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">Outside - A Tribute To Erik S.</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Dusha Connection (Ⓒ Capricorn Music 2023)</p>
            </div>

            <!-- 7. A Somnambule Beauty's Serpentine Traces -->
            <div class="group cursor-pointer" onclick="openVideo('nWNNEHPSyWs')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/nWNNEHPSyWs/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="Somnambule">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">A Somnambule Beauty's Serpentine Traces</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">(℗ 2022 Markus Wach)</p>
            </div>

             <!-- 8. Der West-Östliche Artmann -->
             <div class="group cursor-pointer" onclick="openVideo('NG3_-ZmVTQc')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500">
                    <img src="https://img.youtube.com/vi/NG3_-ZmVTQc/hqdefault.jpg" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" alt="Der West-Östliche Artmann">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-500 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all">Der West-Östliche Artmann</h4>
            </div>
        </div>
    </section>

    <!-- 4. GALLERY (NEW SECTION: 15 Videos + 15 Pictures) -->
    <section id="gallery" class="py-32 px-6 md:px-12 bg-stone-900 text-stone-100">
        <div class="max-w-screen-2xl mx-auto">
             <div class="flex flex-col md:flex-row justify-between items-end mb-16 reveal">
                <div>
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-400 mb-4">Gallery</h2>
                    <h3 class="text-5xl md:text-6xl font-serif text-white">Visual Archive</h3>
                </div>
                <p class="text-stone-500 font-light mt-4 md:mt-0 max-w-sm text-right">
                    A collection of moments, performances, and memories.
                </p>
            </div>

            <!-- Dense Grid for 30 items -->
            <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 reveal">
                <!-- Items are populated via JS -->
            </div>
        </div>
    </section>

    <!-- 5. UPCOMING PERFORMANCES (LIVE) -->
    <section id="live" class="py-32 px-6 md:px-12 bg-stone-200/30 border-y border-stone-200">
        <div class="max-w-screen-2xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-baseline mb-12 gap-8 reveal">
                <div>
                    <h2 class="text-4xl md:text-6xl font-serif text-stone-900 mb-4">Upcoming Performances</h2>
                    <p class="text-stone-500 font-light max-w-lg">
                        Explore upcoming venues and locations. Use the button below to see how far you are from each event.
                    </p>
                </div>
                
                <div class="flex flex-col items-end gap-2">
                    <button onclick="calculateDistances()" id="distance-btn" class="px-6 py-2 border border-stone-900 rounded-full hover:bg-stone-900 hover:text-stone-50 transition-colors duration-300 text-[10px] uppercase tracking-widest flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon></svg>
                        Find Distance
                    </button>
                    <span id="geo-status" class="text-[10px] text-stone-400 h-4"></span>
                </div>
            </div>

            <!-- Map Container -->
            <div id="concert-map" class="w-full h-[400px] bg-stone-200 mb-16 grayscale-[80%] hover:grayscale-0 transition-all duration-700 reveal z-10 border border-stone-300"></div>

            <div class="w-full text-left border-t border-stone-300" id="concert-list">
                <!-- Concert Items will be rendered here dynamically via JS -->
            </div>
        </div>
    </section>

    <!-- 6. THE INSTRUMENT (ERHU) -->
    <section id="erhu" class="py-32 md:py-48 px-6 md:px-12 bg-stone-900 text-stone-100 relative overflow-hidden">
        <!-- Background Detail -->
        <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
             <div class="w-full h-full bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-stone-500 via-transparent to-transparent"></div>
        </div>

        <div class="max-w-screen-2xl mx-auto relative z-10">
            <div class="grid lg:grid-cols-2 gap-16 mb-24 reveal">
                <div>
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-400 mb-6">The Instrument</h2>
                    <h3 class="text-5xl md:text-7xl font-serif text-white mb-6">Spirit & Structure</h3>
                </div>
                <div class="flex items-end">
                    <p class="text-stone-400 font-light text-lg max-w-md">
                        A two-stringed bowed musical instrument, more specifically a spike fiddle, which may also be called a Southern Fiddle.
                    </p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-px bg-stone-800 border border-stone-800 reveal">
                <!-- Card 1: Origins -->
                <div class="bg-stone-900 p-8 md:p-12 hover:bg-stone-800/50 transition-colors group">
                    <span class="text-xs uppercase tracking-widest text-stone-500 mb-8 block group-hover:text-white transition-colors">History</span>
                    <h4 class="text-3xl font-serif italic text-white mb-2">Origins</h4>
                    <p class="text-lg text-stone-300 font-light">Tang Dynasty</p>
                    <p class="text-sm text-stone-500 mt-1">~1000 Year Heritage</p>
                </div>

                <!-- Card 2: Resonance -->
                <div class="bg-stone-900 p-8 md:p-12 hover:bg-stone-800/50 transition-colors group">
                    <span class="text-xs uppercase tracking-widest text-stone-500 mb-8 block group-hover:text-white transition-colors">Acoustics</span>
                    <h4 class="text-3xl font-serif italic text-white mb-2">Resonance</h4>
                    <p class="text-lg text-stone-300 font-light">Snakeskin</p>
                    <p class="text-sm text-stone-500 mt-1">Organic Vocal Timbre</p>
                </div>

                <!-- Card 3: Material -->
                <div class="bg-stone-900 p-8 md:p-12 hover:bg-stone-800/50 transition-colors group">
                    <span class="text-xs uppercase tracking-widest text-stone-500 mb-8 block group-hover:text-white transition-colors">Craft</span>
                    <h4 class="text-3xl font-serif italic text-white mb-2">Material</h4>
                    <p class="text-lg text-stone-300 font-light">Ebony & Silk</p>
                    <p class="text-sm text-stone-500 mt-1">Density & Fluidity</p>
                </div>

                <!-- Card 4: Range -->
                <div class="bg-stone-900 p-8 md:p-12 hover:bg-stone-800/50 transition-colors group">
                    <span class="text-xs uppercase tracking-widest text-stone-500 mb-8 block group-hover:text-white transition-colors">Capability</span>
                    <h4 class="text-3xl font-serif italic text-white mb-2">Range</h4>
                    <p class="text-lg text-stone-300 font-light">3.5 Octaves</p>
                    <p class="text-sm text-stone-500 mt-1">Extreme Expressivity</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 7. EDUCATION (Restored Text & Layout) -->
    <section id="education" class="py-32 md:py-48 px-6 md:px-12 bg-stone-200/40">
        <div class="max-w-screen-xl mx-auto">
            <div class="grid lg:grid-cols-2 gap-24 items-center">
                <div class="reveal">
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-6">Education</h2>
                    <h3 class="text-5xl md:text-6xl font-serif text-stone-900 mb-8">Master the Erhu</h3>
                    <p class="text-stone-600 text-lg font-light leading-relaxed mb-12">
                        Whether you are a complete beginner or a professional musician looking to expand your timbre palette, Chiao-Hua offers a structured yet flexible curriculum. 
                        <br><br>
                        Lessons cover Jianpu notation, traditional bowing techniques, and modern adaptation styles. Available in-person in Vienna or worldwide via Zoom.
                    </p>
                    
                    <div class="flex flex-col gap-6">
                        <div class="flex items-center gap-6 p-6 bg-[#fbfaf9] border border-stone-200 shadow-sm hover:shadow-md transition-shadow">
                            <span class="text-3xl font-serif italic text-stone-400">01</span>
                            <div>
                                <h4 class="text-lg font-serif text-stone-900">Trial Session</h4>
                                <p class="text-xs uppercase tracking-widest text-stone-500">30 Minutes • Assessment</p>
                            </div>
                            <div class="ml-auto">
                                <a href="#booking" class="w-10 h-10 rounded-full border border-stone-300 flex items-center justify-center hover:bg-stone-900 hover:text-white transition-colors">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                                </a>
                            </div>
                        </div>
                        <div class="flex items-center gap-6 p-6 bg-[#fbfaf9] border border-stone-200 shadow-sm hover:shadow-md transition-shadow">
                            <span class="text-3xl font-serif italic text-stone-400">02</span>
                            <div>
                                <h4 class="text-lg font-serif text-stone-900">Regular Study</h4>
                                <p class="text-xs uppercase tracking-widest text-stone-500">60 Minutes • Weekly</p>
                            </div>
                            <div class="ml-auto">
                                <a href="#booking" class="w-10 h-10 rounded-full border border-stone-300 flex items-center justify-center hover:bg-stone-900 hover:text-white transition-colors">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teaching Image -->
                <div class="relative h-full min-h-[500px] reveal">
                    <div class="absolute top-0 right-0 w-4/5 h-4/5 bg-white p-4 shadow-2xl z-10 rotate-3">
                         <img src="https://images.unsplash.com/photo-1593693397690-362cb9666fc2?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover filter sepia-[0.3]" alt="Lesson Close up">
                    </div>
                    <div class="absolute bottom-0 left-0 w-3/5 h-3/5 bg-stone-800 p-8 flex flex-col justify-between z-20 -rotate-2">
                         <p class="text-stone-300 font-serif text-xl italic leading-relaxed">"The erhu is the most vocal of instruments; it sings the thoughts you cannot speak."</p>
                         <span class="text-stone-500 text-[10px] uppercase tracking-widest">Student Philosophy</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer id="contact" class="pt-40 pb-12 px-6 md:px-12 bg-[#f2f0eb] border-t border-stone-300">
        <!-- Booking Widget Section -->
        <div id="booking" class="max-w-4xl mx-auto mb-32 reveal text-center">
            <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-12">Schedule</h2>
            <div class="calendly-inline-widget w-full" data-url="https://calendly.com/erhu5030/30min?hide_event_type_details=1&hide_gdpr_banner=1" style="min-width:320px;height:700px;"></div>
            <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        </div>

        <div class="max-w-screen-2xl mx-auto flex flex-col items-center text-center reveal">
            <h2 class="text-6xl md:text-8xl lg:text-9xl font-serif text-stone-900 italic mb-12 hover:scale-105 transition-transform duration-700 cursor-pointer">
                <a href="mailto:contact@chiaohua.com">Let's Play.</a>
            </h2>
            
            <div class="flex flex-col md:flex-row gap-8 md:gap-24 mb-24">
                <div>
                    <span class="block text-[10px] uppercase tracking-widest text-stone-400 mb-4">Inquiries</span>
                    <a href="mailto:contact@chiaohua.com" class="text-lg md:text-xl font-serif text-stone-900 border-b border-transparent hover:border-stone-900 transition-all">contact@chiaohua.com</a>
                </div>
                <div>
                    <span class="block text-[10px] uppercase tracking-widest text-stone-400 mb-4">Management</span>
                    <span class="text-lg md:text-xl font-serif text-stone-900">+43 660 457 2474</span>
                </div>
                <div>
                    <span class="block text-[10px] uppercase tracking-widest text-stone-400 mb-4">Follow</span>
                    <div class="flex gap-6">
                        <a href="https://www.instagram.com/chiaohuaerhu/" target="_blank" class="text-stone-900 hover:opacity-50 transition-opacity">IG</a>
                        <a href="https://open.spotify.com/playlist/7FRkCi0fXb8wc61tii7zDP?si=3a1f739630934bdc" target="_blank" class="text-stone-900 hover:opacity-50 transition-opacity">Spotify</a>
                        <a href="https://youtube.com/playlist?list=PLYHC244Cp1APb13yH3OSWitOLjsR3QpSi&si=lkzOijc8AM8y1VV3" target="_blank" class="text-stone-900 hover:opacity-50 transition-opacity">YT</a>
                    </div>
                </div>
            </div>

            <div class="w-full flex justify-between items-end border-t border-stone-300 pt-8">
                <span class="text-[10px] uppercase tracking-widest text-stone-400">© 2026 Chiao-Hua Chang</span>
                <a href="#hero" class="text-[10px] uppercase tracking-widest text-stone-400 hover:text-stone-900">Back to Top</a>
            </div>
        </div>
    </footer>

    <!-- Scripts for Interactivity -->
    <script>
        // --- GALLERY GENERATION (15 Pics + 15 Videos) ---
        const galleryContainer = document.getElementById('gallery-grid');
        
        // Provided Video IDs (repeated to fill 15 slots)
        const videoIds = [
            'S0vfVuYH_3Q', 'QNVAUg52Las', 'CZpTLy7Ee-4', 'fr0FB7OPbhE', 
            'YN7oQ3Z7eXE', 'wH0le3tV3KE', 'nWNNEHPSyWs', 'NG3_-ZmVTQc'
        ];
        
        // Generic Unsplash Placeholders for "Pictures" (15 images)
        const imageUrls = [
            'https://images.unsplash.com/photo-1507838153414-b4b713384ebd?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1514525253440-b393452e8d26?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1465847899078-b413929f7120?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1462965326201-d02e4f455804?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1510915361894-db8b60106cb1?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1460723237483-7a6dc9d0b212?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1519682577862-22b62b24e493?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1508700115892-45ecd05ae2ad?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1511192336575-5a79af67a629?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1493225255756-d9584f8606e9?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1514117445516-2ec90fa4d84b?auto=format&fit=crop&q=80&w=400',
            'https://images.unsplash.com/photo-1459749411177-0473ef7161eb?auto=format&fit=crop&q=80&w=400'
        ];

        // Helper to shuffle or interleave
        const items = [];
        
        // Add 15 videos
        for(let i=0; i<15; i++) {
            const vidId = videoIds[i % videoIds.length];
            items.push({
                type: 'video',
                src: vidId,
                thumb: `https://img.youtube.com/vi/${vidId}/mqdefault.jpg`
            });
        }
        
        // Add 15 images
        for(let i=0; i<15; i++) {
            items.push({
                type: 'image',
                src: imageUrls[i],
                thumb: imageUrls[i]
            });
        }
        
        // Simple shuffle for "Gallery" feel
        items.sort(() => Math.random() - 0.5);

        // Render
        items.forEach((item, idx) => {
            const el = document.createElement('div');
            el.className = "aspect-square bg-stone-800 overflow-hidden relative group cursor-pointer border border-stone-800/50 hover:border-stone-500 transition-all";
            
            if(item.type === 'video') {
                el.innerHTML = `
                    <img src="${item.thumb}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500">
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div class="w-8 h-8 rounded-full border border-white/50 bg-black/30 flex items-center justify-center backdrop-blur-sm group-hover:bg-stone-900 group-hover:border-white transition-all">
                             <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-0.5"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                `;
                el.onclick = () => openVideo(item.src);
            } else {
                el.innerHTML = `
                    <img src="${item.thumb}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500 filter grayscale group-hover:grayscale-0">
                    <div class="absolute inset-0 bg-stone-900/20 group-hover:bg-transparent transition-colors"></div>
                `;
                // Image click could open lightbox, but for now just static visual
            }
            galleryContainer.appendChild(el);
        });


        // --- CONCERT DATA & MAP LOGIC ---
        const concerts = [
            {
                date: 'March 19, 2026',
                venue: 'Sargfabrik',
                address: 'Goldschlagstraße 169, 1140 Wien',
                title: 'DUSHA CONNECTION - Outside',
                details: 'A Jazzy Tribute to Erik S • 19:30',
                coords: [48.1962, 16.3124]
            },
            {
                date: 'Oct 24, 2026',
                venue: 'Konzerthaus Vienna',
                address: 'Lothringerstraße 20, 1030 Wien',
                title: 'With Przemysław Strączek',
                details: 'Berio-Saal • 19:30',
                coords: [48.2008, 16.3770]
            },
            {
                date: 'Nov 12, 2026',
                venue: 'Porgy & Bess',
                address: 'Riemergasse 11, 1010 Wien',
                title: 'Jazz Improvisation Night',
                details: 'Experimental Series • 20:30',
                coords: [48.2058, 16.3756]
            },
            {
                date: 'Dec 05, 2026',
                venue: 'Musikverein Graz',
                address: 'Opernring 2, 8010 Graz',
                title: 'The Orchestra of Cultures',
                details: 'Großer Saal • 19:00',
                coords: [47.0694, 15.4418]
            },
            {
                date: 'Jan 20, 2027',
                venue: 'National Concert Hall',
                address: 'No. 21-1, Zhongshan S Rd, Taipei City',
                title: 'Solo Recital',
                details: 'Main Auditorium • 19:30',
                coords: [25.0357, 121.5197]
            }
        ];

        // Initialize Map
        const map = L.map('concert-map', {
            center: [48.2082, 16.3738], // Default to Vienna
            zoom: 12,
            scrollWheelZoom: false, // Prevent accidental scrolling
            zoomControl: false // Minimalist look
        });

        // Add Tiles (Dark/Grayscale for aesthetic matching)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        L.control.zoom({ position: 'bottomright' }).addTo(map);

        // Add Markers and Build List
        const concertList = document.getElementById('concert-list');
        
        concerts.forEach((c, index) => {
            // Add Marker
            const marker = L.marker(c.coords).addTo(map);
            marker.bindPopup(`<b>${c.venue}</b><br>${c.date}<br>${c.title}`);

            // Build List Item HTML
            const item = document.createElement('div');
            item.className = "group grid grid-cols-1 md:grid-cols-12 py-8 border-b border-stone-300 hover:bg-stone-200/50 transition-colors items-start reveal";
            item.innerHTML = `
                <div class="md:col-span-2 text-xs uppercase tracking-widest text-stone-500 mb-2 md:mb-0">${c.date}</div>
                <div class="md:col-span-4">
                    <div class="text-2xl font-serif text-stone-900 group-hover:italic transition-all leading-tight">${c.venue}</div>
                    <div class="text-xs text-stone-500 mt-1">${c.address}</div>
                </div>
                <div class="md:col-span-4 mt-4 md:mt-0">
                    <div class="text-lg font-serif text-stone-800">${c.title}</div>
                    <div class="text-sm text-stone-600 font-light italic">${c.details}</div>
                </div>
                <div class="md:col-span-2 flex flex-col items-end justify-center mt-4 md:mt-0 gap-2">
                    <a href="https://www.google.com/maps/dir/?api=1&destination=${c.coords[0]},${c.coords[1]}" target="_blank" class="text-[10px] uppercase tracking-widest text-stone-600 hover:text-stone-900 border-b border-stone-300 hover:border-stone-900 transition-all flex items-center gap-1">
                        Get Directions <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
                    </a>
                    <span class="distance-display text-[10px] font-mono text-stone-400 opacity-0 transition-opacity" id="dist-${index}"></span>
                </div>
            `;
            
            // Highlight marker on hover
            item.addEventListener('mouseenter', () => marker.openPopup());
            
            concertList.appendChild(item);
        });

        // Fit map bounds to show all markers initially
        const group = new L.featureGroup(concerts.map(c => L.marker(c.coords)));
        map.fitBounds(group.getBounds().pad(0.1));

        // --- DISTANCE CALCULATION LOGIC ---
        function calculateDistances() {
            const status = document.getElementById('geo-status');
            const btn = document.getElementById('distance-btn');
            
            status.textContent = "Locating...";
            btn.disabled = true;

            if (!navigator.geolocation) {
                status.textContent = "Geolocation not supported";
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const userLat = position.coords.latitude;
                    const userLng = position.coords.longitude;
                    
                    // Add user marker
                    const userIcon = L.divIcon({
                        className: 'user-marker',
                        html: '<div style="background-color:#ef4444;width:12px;height:12px;border-radius:50%;border:2px solid white;box-shadow:0 2px 4px rgba(0,0,0,0.3);"></div>',
                        iconSize: [12, 12]
                    });
                    L.marker([userLat, userLng], {icon: userIcon}).addTo(map).bindPopup("You are here").openPopup();
                    
                    // Center map on user
                    map.setView([userLat, userLng], 10);

                    // Calculate and display distances
                    concerts.forEach((c, index) => {
                        const dist = getDistanceFromLatLonInKm(userLat, userLng, c.coords[0], c.coords[1]);
                        const distEl = document.getElementById(`dist-${index}`);
                        distEl.textContent = `${dist.toFixed(1)} km away`;
                        distEl.classList.remove('opacity-0');
                    });

                    status.textContent = "Distances updated";
                    btn.classList.add('bg-stone-900', 'text-white');
                    btn.innerHTML = "Updated";
                },
                () => {
                    status.textContent = "Unable to retrieve location";
                    btn.disabled = false;
                }
            );
        }

        // Haversine Formula for distance
        function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
            var R = 6371; // Radius of the earth in km
            var dLat = deg2rad(lat2 - lat1);  
            var dLon = deg2rad(lon2 - lon1); 
            var a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon/2) * Math.sin(dLon/2); 
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
            var d = R * c; // Distance in km
            return d;
        }

        function deg2rad(deg) {
            return deg * (Math.PI/180)
        }


        // --- VIDEO PLAYER LOGIC ---
        const modal = document.getElementById('video-modal');
        const iframe = document.getElementById('youtube-frame');
        const fallbackLink = document.getElementById('youtube-fallback-link');
        const closeModalBtn = document.getElementById('close-modal-btn');

        function openVideo(videoId) {
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&playsinline=1`;
            fallbackLink.href = `https://www.youtube.com/watch?v=${videoId}`;
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
            }, 50);
            document.body.style.overflow = 'hidden';
        }

        function closeVideo() {
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                iframe.src = '';
                document.body.style.overflow = '';
            }, 500);
        }

        closeModalBtn.addEventListener('click', closeVideo);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeVideo();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeVideo();
        });

        // --- SCROLL ANIMATIONS ---
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // --- MOBILE MENU ---
        const menuBtn = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileLinks = document.querySelectorAll('.mobile-link');
        let isMenuOpen = false;

        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                mobileMenu.classList.remove('translate-y-full');
                mobileMenu.classList.add('translate-y-0');
                menuBtn.textContent = 'Close';
                document.body.style.overflow = 'hidden';
            } else {
                mobileMenu.classList.add('translate-y-full');
                mobileMenu.classList.remove('translate-y-0');
                menuBtn.textContent = 'Menu';
                document.body.style.overflow = '';
            }
        });

        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                isMenuOpen = false;
                mobileMenu.classList.add('translate-y-full');
                mobileMenu.classList.remove('translate-y-0');
                menuBtn.textContent = 'Menu';
                document.body.style.overflow = '';
            });
        });

        // --- NAVBAR SCROLL ---
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('bg-[#f2f0eb]/90', 'backdrop-blur-md', 'shadow-sm', 'py-4');
                navbar.classList.remove('py-8');
            } else {
                navbar.classList.remove('bg-[#f2f0eb]/90', 'backdrop-blur-md', 'shadow-sm', 'py-4');
                navbar.classList.add('py-8');
            }
        });
    </script>
</body>
</html>


