<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiao-Hua Chang | Erhu Soloist</title>
    <meta name="description" content="Official portfolio of Chiao-Hua Chang, Erhu Soloist / Vocals / Morin khuur / Educator based in Vienna.">
    
    <!-- Preconnect to critical domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://i.imgur.com">
    <link rel="preconnect" href="https://img.youtube.com">
    
    <!-- Preload Hero Poster for Instant Visual -->
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1511192336575-5a79af67a629?auto=format&fit=crop&q=80&w=1080">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@200;300;400;500&family=Noto+Serif+TC:wght@300;500;700&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">

    <!-- Leaflet CSS for Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Leaflet JS for Map (Removed defer to fix race condition) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        stone: {
                            50: '#fafaf9',
                            100: '#f5f5f4',
                            200: '#e7e5e4',
                            300: '#d6d3d1',
                            400: '#a8a29e',
                            500: '#78716c',
                            600: '#57534e',
                            800: '#292524',
                            900: '#1c1917',
                            950: '#0c0a09',
                        },
                        paper: '#f2f0eb', 
                        cinnabar: '#A63429', // Traditional Chinese Red for accents
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        chinese: ['Noto Serif TC', 'serif'],
                        calligraphy: ['Ma Shan Zheng', 'cursive'],
                    },
                    letterSpacing: {
                        'widest-xl': '0.25em',
                        'widest-2xl': '0.4em',
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 1.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(40px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml,%3Csvg viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cfilter id=\"noiseFilter\"%3E%3CfeTurbulence type=\"fractalNoise\" baseFrequency=\"0.85\" numOctaves=\"3\" stitchTiles=\"stitch\"/%3E%3C/filter%3E%3Crect width=\"100%25\" height=\"100%25\" filter=\"url(%23noiseFilter)\" opacity=\"0.4\"/%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            background-color: #f2f0eb; 
            color: #1c1917; 
            -webkit-font-smoothing: antialiased; 
            -moz-osx-font-smoothing: grayscale;
        }
        
        .texture-overlay {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E");
            opacity: 0.08;
            mix-blend-mode: multiply;
            pointer-events: none;
            position: fixed;
            inset: 0;
            z-index: 50;
        }

        ::selection {
            background: #A63429;
            color: #f2f0eb;
        }

        /* Smooth Luxury Transitions */
        a, button, .group, .nav-link, .card-hover {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
            transition-duration: 700ms;
        }

        .hero-video-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .hero-video-wrapper video {
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }

        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1.4s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform, opacity;
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .nav-link::after {
            content: '';
            display: block;
            width: 0;
            height: 1px;
            background: currentColor;
            transition: width 0.7s cubic-bezier(0.22, 1, 0.36, 1);
            margin-top: 4px;
        }
        .nav-link:hover::after {
            width: 100%;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 100px;
        }

        #video-modal, #bio-modal {
            transition: opacity 0.7s ease;
        }

        .vertical-text {
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        /* Chinese Seal Stamp Effect */
        .seal {
            border: 2px solid #A63429;
            color: #A63429;
            padding: 4px 2px;
            font-family: 'Ma Shan Zheng', cursive;
            display: inline-block;
            border-radius: 4px;
            line-height: 1;
        }
    </style>
</head>
<body class="overflow-x-hidden relative">

    <!-- Texture Background -->
    <div class="texture-overlay"></div>

    <!-- VIDEO MODAL -->
    <div id="video-modal" class="fixed inset-0 z-[100] bg-stone-900/98 backdrop-blur-md hidden flex flex-col items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-700">
        <button id="close-modal-btn" class="absolute top-6 right-6 z-[110] text-stone-400 hover:text-white transition-colors group flex items-center gap-2">
            <span class="text-[10px] uppercase tracking-widest hidden md:block opacity-0 group-hover:opacity-100 transition-opacity" data-i18n="close">Close</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        <div class="w-full max-w-6xl aspect-video bg-black shadow-2xl relative overflow-hidden mb-6">
             <iframe id="youtube-frame" class="w-full h-full hidden" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
             <video id="mp4-player" class="w-full h-full hidden" controls playsinline></video>
        </div>
        <!-- Caption Area for Context -->
        <div id="modal-caption" class="text-stone-400 font-serif italic text-lg text-center max-w-2xl"></div>
    </div>

    <!-- BIO MODAL -->
    <div id="bio-modal" class="fixed inset-0 z-[100] bg-stone-50/98 backdrop-blur-md hidden flex flex-col items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-700">
        <button id="close-bio-btn" class="absolute top-6 right-6 z-[110] text-stone-600 hover:text-stone-900 transition-colors group flex items-center gap-2">
            <span class="text-[10px] uppercase tracking-widest hidden md:block opacity-0 group-hover:opacity-100 transition-opacity" data-i18n="close">Close</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        <div class="w-full max-w-3xl bg-white shadow-2xl relative overflow-y-auto max-h-[80vh] p-12 border border-stone-200">
             <h3 class="text-3xl font-serif text-stone-900 mb-8">Chiao-Hua Chang</h3>
             <div class="text-lg font-light text-stone-600 leading-relaxed space-y-6">
                <p>
                    <strong>MA Ethno-Musicology / Erhu Soloist, teacher</strong>
                </p>
                <p>
                    Born in Taiwan, Ms. Chang has been living in Vienna since 2013 as a freelance musician and Erhu teacher. She not only plays traditional music but also tries to build a cultural bridge by combining Eastern and Western cultures musically. To date she has played with many local and international musicians and ensembles in many countries.
                </p>
                <p>
                    Here is a small selection: She took part in the piece "Don Quijote" at the Haag Summer Theater, performed with Hans Tschiritsch and the accordionist Otto Lechner in the Porgy and Bess jazz club. She is currently involved in the "CULTURAL CONCEPT" project with Przemysław Strączek, in the reading "Der West-Östliche Artmann", the Orchestra of Cultures under Adrian Werum and "Colores" by Eldis La Rosa. She has also participated in various international free improvisations festivals.
                </p>
                <p>
                    Since 2000, she can look back on several years of pedagogical experience through Erhu teaching. 2001 Bachelor's degree in the Erhu instrumental subject from Shih-Chien University. In 2008 she completed her master's degree at the "Tainan National University of the Arts" with a master's thesis on the indigenous people of the “Tsou".
                </p>
             </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-[60] px-6 py-6 md:px-12 md:py-8 flex justify-between items-center transition-all duration-700" id="navbar">
        <a href="#hero" id="nav-brand" class="text-2xl font-serif italic font-bold tracking-tighter text-stone-900 mix-blend-difference hover:opacity-70 transition-opacity z-50">C / C</a>
        
        <!-- Desktop Menu -->
        <div id="nav-desktop" class="hidden md:flex items-center gap-12 text-[11px] uppercase tracking-widest-xl font-medium text-stone-900 mix-blend-difference z-50">
            <a href="#about" class="nav-link" data-i18n="about">About</a>
            <a href="#works" class="nav-link" data-i18n="works">Works</a>
            <a href="#gallery" class="nav-link" data-i18n="gallery">Gallery</a>
            <a href="#live" class="nav-link" data-i18n="live">Live</a>
            <a href="#erhu" class="nav-link" data-i18n="erhu">The Erhu</a>
            <a href="#education" class="nav-link" data-i18n="education">Education</a>
            
            <!-- Language Toggle -->
            <div class="flex items-center gap-3 border-l border-stone-500/50 pl-8 ml-4">
                <button onclick="changeLanguage('en')" class="hover:text-stone-400 transition-colors opacity-100 lang-btn" data-lang="en">EN</button>
                <button onclick="changeLanguage('de')" class="hover:text-stone-400 transition-colors opacity-50 lang-btn" data-lang="de">DE</button>
                <button onclick="changeLanguage('zh')" class="hover:text-stone-400 transition-colors opacity-50 lang-btn font-chinese" data-lang="zh">中</button>
            </div>

            <a href="#contact" class="px-6 py-2 border border-stone-900 rounded-full hover:bg-stone-900 hover:text-stone-50 transition-all duration-700" data-i18n="contact">Contact</a>
        </div>

        <!-- Mobile Menu Button -->
        <button id="menu-toggle" class="md:hidden z-50 mix-blend-difference text-stone-900 uppercase text-xs tracking-widest" data-i18n="menu">
            Menu
        </button>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 z-[55] bg-[#f2f0eb] flex flex-col items-center justify-center gap-8 translate-y-full transition-transform duration-1000 ease-in-out">
        <div class="flex gap-6 mb-8">
            <button onclick="changeLanguage('en')" class="text-xl font-serif">EN</button>
            <button onclick="changeLanguage('de')" class="text-xl font-serif">DE</button>
            <button onclick="changeLanguage('zh')" class="text-xl font-serif">中</button>
        </div>
        <a href="#about" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="about">About</a>
        <a href="#works" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="works">Works</a>
        <a href="#gallery" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="gallery">Gallery</a>
        <a href="#live" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="live">Live</a>
        <a href="#erhu" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="erhu">The Erhu</a>
        <a href="#education" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="education">Education</a>
        <a href="#contact" class="mobile-link font-serif text-5xl italic text-stone-400 hover:text-stone-900 transition-colors" data-i18n="contact">Contact</a>
    </div>

    <!-- 1. HERO SECTION -->
    <section id="hero" class="relative h-[100dvh] w-full overflow-hidden flex items-center justify-center">
        <div class="hero-video-wrapper">
            <!-- Optimized Video: High priority fetch, auto preload, optimized poster -->
            <video autoplay muted loop playsinline fetchpriority="high" preload="auto" poster="https://images.unsplash.com/photo-1511192336575-5a79af67a629?auto=format&fit=crop&q=80&w=1080">
                <source src="https://i.imgur.com/WfajINu.mp4" type="video/mp4">
            </video>
            <div class="absolute inset-0 bg-black/40"></div>
            <div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"></div>
        </div>

        <div class="relative z-10 text-center px-4">
            <span class="block text-xs md:text-sm tracking-[0.4em] uppercase text-stone-300 mb-6 animate-fade-in-up" data-i18n="location">Vienna • Taiwan</span>
            
            <h1 class="text-6xl md:text-[9rem] leading-none font-serif italic text-white mb-6 animate-fade-in-up drop-shadow-2xl animate-float" style="animation-delay: 0.1s">
                Chiao-Hua<br/>Chang
            </h1>
            
            <p class="text-xs tracking-[0.3em] uppercase text-stone-200 mb-12 animate-fade-in-up" style="animation-delay: 0.2s" data-i18n="hero_role">
                Erhu Soloist / Vocals / Morin khuur / Educator 
            </p>
            
            <div class="animate-fade-in-up flex flex-col md:flex-row gap-8 justify-center items-center" style="animation-delay: 0.3s">
                <a href="#works" class="group text-[11px] uppercase tracking-widest text-white/80 hover:text-white transition-colors pb-1 border-b border-transparent hover:border-white/50" data-i18n="enter_portfolio">
                    View Selected Works
                </a>
                <span class="hidden md:inline-block text-stone-500">•</span>
                <a href="#booking" class="group text-[11px] uppercase tracking-widest text-white/80 hover:text-white transition-colors pb-1 border-b border-transparent hover:border-white/50" data-i18n="view_schedule">
                    Book Lesson
                </a>
            </div>
        </div>
    </section>

    <!-- 2. BIOGRAPHY (ABOUT) -->
    <section id="about" class="py-32 md:py-48 px-6 md:px-12 max-w-screen-2xl mx-auto">
        <div class="grid lg:grid-cols-12 gap-12 items-start">
            
            <div class="lg:col-span-5 reveal">
                <div class="relative aspect-[3/4] overflow-hidden group">
                    <img src="https://i.imgur.com/6zgpkDl.jpeg" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-[2s] ease-out group-hover:scale-105 filter sepia-[0.1] contrast-[0.95]" 
                         alt="Chiao-Hua Chang Portrait">
                </div>
            </div>

            <div class="lg:col-span-6 lg:col-start-7 pt-12 lg:pt-24 space-y-12 reveal">
                <div>
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-6 flex items-center gap-3">
                        <span class="w-6 h-px bg-stone-400"></span> <span data-i18n="biography">Biography</span>
                    </h2>
                    <h3 class="text-4xl md:text-5xl lg:text-6xl font-serif leading-[1.15] text-stone-900" data-i18n="bio_headline">
                        Bridging continents through the resonance of two strings.
                    </h3>
                </div>

                <div class="text-lg md:text-xl font-light text-stone-600 leading-relaxed space-y-8" data-i18n="bio_body">
                    <p>
                        Based in Vienna since 2013, Chiao-Hua Chang creates a unique sonic dialogue between Eastern tradition and Western innovation. With a Master's in Ethnomusicology, she navigates the space between classical discipline and avant-garde improvisation.
                    </p>
                    <p>
                        Her diverse portfolio spans from the Orchestra of Cultures to experimental jazz at Porgy & Bess. She challenges the boundaries of the Erhu, proving it is a living, breathing voice in contemporary music.
                    </p>
                </div>
                
                <button onclick="openBioModal()" class="text-[10px] uppercase tracking-widest text-stone-900 border-b border-stone-900 pb-1 hover:text-stone-500 hover:border-stone-500 transition-colors" data-i18n="read_more">Read More</button>

                <div class="grid grid-cols-2 gap-8 pt-8 border-t border-stone-300/50">
                    <div>
                        <span class="block text-4xl font-serif text-stone-900 mb-2">25+</span>
                        <span class="text-[10px] uppercase tracking-widest text-stone-500" data-i18n="years_teaching">Years Teaching</span>
                    </div>
                    <div>
                        <span class="block text-4xl font-serif text-stone-900 mb-2">MA</span>
                        <span class="text-[10px] uppercase tracking-widest text-stone-500" data-i18n="ethnomusicology">Ethnomusicology</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. SELECTED WORKS -->
    <section id="works" class="py-32 md:py-48 px-6 md:px-12 max-w-screen-2xl mx-auto bg-stone-100">
        <div class="flex flex-col md:flex-row justify-between items-end mb-24 reveal">
            <div>
                <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-4" data-i18n="archive">Archive</h2>
                <h3 class="text-5xl md:text-7xl font-serif text-stone-900 mb-6" data-i18n="selected_works">Selected Works</h3>
                <div class="space-y-2">
                    <p class="text-lg md:text-xl font-serif italic text-stone-600" data-i18n="works_quote">Guided by two strings, journey across the world and explore life.</p>
                </div>
            </div>
            <p class="text-stone-500 text-sm font-light mt-6 md:mt-0 max-w-md text-right" data-i18n="works_desc">
                A curation of collaborations spanning jazz, theater, and classical arrangements.
            </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 reveal">
            <!-- Items: Using 'sddefault.jpg' for reliability instead of maxresdefault (grey box prevention) -->
            <div class="group cursor-pointer" onclick="openVideo('S0vfVuYH_3Q')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/S0vfVuYH_3Q/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">Journey of Zyrus</h4>
            </div>

            <div class="group cursor-pointer" onclick="openVideo('QNVAUg52Las')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/QNVAUg52Las/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">A World Symphony</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Orchester der Kulturen</p>
            </div>

            <div class="group cursor-pointer" onclick="openVideo('CZpTLy7Ee-4')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/CZpTLy7Ee-4/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">Cultural Concept</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Przemysław Strączek</p>
            </div>

             <div class="group cursor-pointer" onclick="openVideo('nWNNEHPSyWs')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/nWNNEHPSyWs/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">Infinite Paths</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Feat. Markus Wach</p>
            </div>

            <div class="group cursor-pointer" onclick="openVideo('wH0le3tV3KE')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/wH0le3tV3KE/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">Outside - A Tribute To Erik S.</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Dusha Connection</p>
            </div>

            <div class="group cursor-pointer" onclick="openVideo('NG3_-ZmVTQc')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/NG3_-ZmVTQc/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">Der West-Östliche Artmann</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">König / Nafisi / Chang</p>
            </div>

             <div class="group cursor-pointer" onclick="openVideo('YN7oQ3Z7eXE')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/YN7oQ3Z7eXE/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">Schnittpunkte</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Free Improvising Sextet</p>
            </div>

            <div class="group cursor-pointer" onclick="openVideo('fr0FB7OPbhE')">
                <div class="aspect-video bg-stone-200 relative overflow-hidden mb-6 shadow-sm group-hover:shadow-2xl transition-all duration-700 ease-out">
                    <img src="https://img.youtube.com/vi/fr0FB7OPbhE/sddefault.jpg" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-1000">
                    <div class="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/40 transition-colors duration-700 flex items-center justify-center">
                        <div class="w-16 h-16 rounded-full border border-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-700 backdrop-blur-sm bg-white/20">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-1"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                </div>
                <h4 class="text-xl font-serif text-stone-900 leading-tight mb-2 group-hover:italic transition-all duration-500">I Only Want To Make You Happy</h4>
                <p class="text-[10px] uppercase tracking-widest text-stone-500 leading-relaxed">Colores</p>
            </div>

        </div>
    </section>

    <!-- 4. GALLERY -->
    <section id="gallery" class="py-32 px-6 md:px-12 bg-stone-900 text-stone-100">
        <div class="max-w-screen-2xl mx-auto">
             <div class="flex flex-col md:flex-row justify-between items-end mb-16 reveal">
                <div>
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-400 mb-4" data-i18n="gallery">Gallery</h2>
                    <h3 class="text-5xl md:text-6xl font-serif text-white" data-i18n="visual_archive">Visual Archive</h3>
                </div>
                <p class="text-stone-500 font-light mt-4 md:mt-0 max-w-sm text-right" data-i18n="gallery_desc">
                    A collection of moments, performances, and memories.
                </p>
            </div>
            <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 reveal"></div>
        </div>
    </section>

    <!-- 5. LIVE -->
    <section id="live" class="py-32 px-6 md:px-12 bg-stone-200/30 border-y border-stone-200">
        <div class="max-w-screen-2xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-baseline mb-12 gap-8 reveal">
                <div>
                    <h2 class="text-4xl md:text-6xl font-serif text-stone-900 mb-4" data-i18n="upcoming_performances">Upcoming Performances</h2>
                    <p class="text-stone-500 font-light max-w-lg" data-i18n="live_desc">
                        Explore upcoming venues and locations. Use the button below to see how far you are from each event.
                    </p>
                </div>
                
                <div class="flex flex-col items-end gap-2">
                    <button onclick="calculateDistances()" id="distance-btn" class="px-6 py-2 border border-stone-900 rounded-full hover:bg-stone-900 hover:text-stone-50 transition-all duration-700 text-[10px] uppercase tracking-widest flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon></svg>
                        <span data-i18n="find_distance">Find Distance</span>
                    </button>
                    <span id="geo-status" class="text-[10px] text-stone-400 h-4"></span>
                </div>
            </div>

            <div id="concert-map" class="w-full h-[400px] bg-stone-200 mb-16 grayscale-[80%] hover:grayscale-0 transition-all duration-[1.5s] ease-out reveal z-10 border border-stone-300"></div>

            <div class="w-full text-left border-t border-stone-300" id="concert-list"></div>
        </div>
    </section>

    <!-- 6. THE INSTRUMENT (MUSEUM STYLE) -->
    <section id="erhu" class="py-48 px-6 md:px-12 bg-[#0c0a09] text-stone-100 relative overflow-hidden">
        <!-- Subtle Pattern Background -->
        <div class="absolute inset-0 opacity-[0.03]" style="background-image: radial-gradient(#333 1px, transparent 1px); background-size: 32px 32px;"></div>
        
        <div class="max-w-screen-2xl mx-auto relative z-10">
            <div class="grid lg:grid-cols-2 gap-24 items-center">
                
                <!-- Left: Immersive Image Area -->
                <div class="relative h-[80vh] reveal group">
                    <!-- Vertical decorative text behind -->
                    <div class="absolute -left-12 top-0 text-[12rem] leading-none font-chinese text-stone-800/30 select-none vertical-text pointer-events-none opacity-50 z-0">
                        二<br>胡
                    </div>
                    
                    <!-- Main Image -->
                    <div class="relative w-full h-full z-10 overflow-hidden shadow-2xl border-l border-stone-800">
                        <img src="https://i.imgur.com/vINL5mF.jpeg" 
                             loading="lazy"
                             class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-[2s] ease-in-out scale-110 group-hover:scale-100" 
                             alt="Erhu Detail">
                        
                        <!-- Gradient Overlay -->
                        <div class="absolute inset-0 bg-gradient-to-t from-[#0c0a09] via-transparent to-transparent opacity-80"></div>
                        
                        <!-- Floating Caption -->
                        <div class="absolute bottom-12 left-8 md:left-12">
                            <h2 class="text-6xl font-serif text-white mb-2 tracking-tight" data-i18n="the_erhu">The Erhu</h2>
                            <p class="font-chinese text-2xl text-stone-400 font-light tracking-widest">Two Strings. Eternal Soul.</p>
                        </div>
                    </div>
                </div>

                <!-- Right: Museum Placards -->
                <div class="space-y-16 pl-0 lg:pl-12 reveal">
                      <div>
                        <h3 class="text-xs uppercase tracking-[0.3em] text-cinnabar mb-6 flex items-center gap-4">
                             <span class="w-12 h-px bg-cinnabar"></span>
                             <span data-i18n="spirit_structure">Spirit & Structure</span>
                        </h3>
                        <p class="text-3xl font-serif text-stone-200 leading-relaxed font-light" data-i18n="erhu_intro">
                            "More vocal than the violin, more ancient than the cello. A spike fiddle that sings the sorrow and joy of a thousand years."
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 pt-12 border-t border-stone-800">
                        <div class="space-y-4">
                            <span class="text-[10px] uppercase tracking-widest text-stone-500 block" data-i18n="history_label">History</span>
                            <h4 class="text-2xl font-serif italic text-stone-200" data-i18n="tang_dynasty">Tang Dynasty</h4>
                            <p class="text-stone-400 font-light text-sm leading-7" data-i18n="history_desc">Originating over a millennium ago from the Xi people of Central Asia. Evolved through the Song and Ming dynasties.</p>
                        </div>

                        <div class="space-y-4">
                            <span class="text-[10px] uppercase tracking-widest text-stone-500 block" data-i18n="material_label">Material</span>
                            <h4 class="text-2xl font-serif italic text-stone-200" data-i18n="ebony_snake">Ebony & Python</h4>
                            <p class="text-stone-400 font-light text-sm leading-7" data-i18n="material_desc">The resonator box is covered with python skin, giving the erhu its distinctive, vocal-like quality.</p>
                        </div>

                        <div class="space-y-4">
                            <span class="text-[10px] uppercase tracking-widest text-stone-500 block" data-i18n="sound_label">Acoustics</span>
                            <h4 class="text-2xl font-serif italic text-stone-200" data-i18n="vocal_timbre">Vocal Timbre</h4>
                            <p class="text-stone-400 font-light text-sm leading-7" data-i18n="sound_desc">With the bow hair passing between the two strings, the sound is generated from within, creating an unbroken ribbon of tone.</p>
                        </div>
                        
                        <div class="space-y-4">
                            <span class="text-[10px] uppercase tracking-widest text-stone-500 block" data-i18n="technique_label">Technique</span>
                            <h4 class="text-2xl font-serif italic text-stone-200" data-i18n="expressivity">Expressivity</h4>
                            <p class="text-stone-400 font-light text-sm leading-7" data-i18n="technique_desc">No fingerboard allows for deep vibrato and fluid portamento, mimicking the subtleties of human singing.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 7. EDUCATION (Redesigned Split Layout) -->
    <section id="education" class="py-32 md:py-48 px-6 md:px-12 bg-stone-200/40">
        <div class="max-w-screen-2xl mx-auto">
            
            <!-- Split Intro: Text & Clean Video -->
            <div class="grid lg:grid-cols-2 gap-16 items-center mb-24 reveal">
                
                <!-- Text Content -->
                <div>
                    <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-6 flex items-center gap-3">
                        <span class="w-6 h-px bg-stone-400"></span> <span data-i18n="education">Education</span>
                    </h2>
                    <h3 class="text-5xl md:text-6xl font-serif text-stone-900 mb-8" data-i18n="master_erhu">Master the Erhu</h3>
                    <p class="text-stone-600 text-lg font-light leading-relaxed mb-12" data-i18n="edu_desc">
                        Whether you are a complete beginner or a professional musician looking to expand your timbre palette, Chiao-Hua offers a structured yet flexible curriculum.
                    </p>
                    
                    <div class="p-8 border-l border-stone-300 bg-stone-100/50">
                         <p class="text-stone-500 font-serif italic text-xl" data-i18n="edu_quote">"The erhu is the most vocal of instruments; it sings the thoughts you cannot speak."</p>
                    </div>
                </div>

                <!-- Clean Embedded Video (No Overlay) -->
                <div class="relative rounded-lg overflow-hidden shadow-2xl bg-black">
                    <video src="https://i.imgur.com/rxZoz5K.mp4" class="w-full h-auto object-cover" autoplay muted loop playsinline controls loading="lazy"></video>
                </div>
            </div>

            <!-- 3 Levels Cards Grid -->
            <div class="grid md:grid-cols-3 gap-8 reveal">
                
                <!-- Level I Card -->
                <a href="#contact" class="group relative p-10 bg-[#fbfaf9] border border-stone-200 hover:border-stone-400 hover:shadow-2xl transition-all duration-700 cursor-pointer overflow-hidden flex flex-col h-full hover:-translate-y-2">
                    <div class="absolute top-0 right-0 p-6 opacity-0 group-hover:opacity-100 transition-opacity translate-x-4 group-hover:translate-x-0 duration-500 text-stone-400">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7l10 10M17 7H7v10"/></svg>
                    </div>
                    
                    <span class="text-xs tracking-widest-xl text-stone-400 uppercase mb-8 block group-hover:text-stone-600 transition-colors border-b border-stone-200 pb-4 w-fit" data-i18n="level_1">Level I</span>
                    <h4 class="text-3xl font-serif text-stone-900 mb-6 group-hover:italic transition-all" data-i18n="level_1_title">Fundamentals</h4>
                    <p class="text-stone-500 font-light leading-relaxed mb-12 flex-grow" data-i18n="level_1_desc">
                        Posture, Jianpu notation, open strings, and basic scales for the absolute beginner. Build a solid foundation.
                    </p>
                    
                    <div class="pt-6 border-t border-stone-200 flex justify-between items-center mt-auto">
                        <span class="text-[10px] uppercase tracking-widest text-stone-500 group-hover:text-stone-900 transition-colors" data-i18n="inquire">Inquire</span>
                        <div class="w-8 h-px bg-stone-300 group-hover:w-16 group-hover:bg-stone-900 transition-all duration-500"></div>
                    </div>
                </a>

                <!-- Level II Card -->
                <a href="#contact" class="group relative p-10 bg-[#fbfaf9] border border-stone-200 hover:border-stone-400 hover:shadow-2xl transition-all duration-700 cursor-pointer overflow-hidden flex flex-col h-full hover:-translate-y-2">
                    <div class="absolute top-0 right-0 p-6 opacity-0 group-hover:opacity-100 transition-opacity translate-x-4 group-hover:translate-x-0 duration-500 text-stone-400">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7l10 10M17 7H7v10"/></svg>
                    </div>
                    
                    <span class="text-xs tracking-widest-xl text-stone-400 uppercase mb-8 block group-hover:text-stone-600 transition-colors border-b border-stone-200 pb-4 w-fit" data-i18n="level_2">Level II</span>
                    <h4 class="text-3xl font-serif text-stone-900 mb-6 group-hover:italic transition-all" data-i18n="level_2_title">Technique</h4>
                    <p class="text-stone-500 font-light leading-relaxed mb-12 flex-grow" data-i18n="level_2_desc">
                        Vibrato, shifting positions, glissando, and traditional folk repertoire development. Refine your voice.
                    </p>
                    
                    <div class="pt-6 border-t border-stone-200 flex justify-between items-center mt-auto">
                        <span class="text-[10px] uppercase tracking-widest text-stone-500 group-hover:text-stone-900 transition-colors" data-i18n="inquire">Inquire</span>
                        <div class="w-8 h-px bg-stone-300 group-hover:w-16 group-hover:bg-stone-900 transition-all duration-500"></div>
                    </div>
                </a>

                <!-- Level III Card -->
                <a href="#contact" class="group relative p-10 bg-[#fbfaf9] border border-stone-200 hover:border-stone-400 hover:shadow-2xl transition-all duration-700 cursor-pointer overflow-hidden flex flex-col h-full hover:-translate-y-2">
                    <div class="absolute top-0 right-0 p-6 opacity-0 group-hover:opacity-100 transition-opacity translate-x-4 group-hover:translate-x-0 duration-500 text-stone-400">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7l10 10M17 7H7v10"/></svg>
                    </div>
                    
                    <span class="text-xs tracking-widest-xl text-stone-400 uppercase mb-8 block group-hover:text-stone-600 transition-colors border-b border-stone-200 pb-4 w-fit" data-i18n="level_3">Level III</span>
                    <h4 class="text-3xl font-serif text-stone-900 mb-6 group-hover:italic transition-all" data-i18n="level_3_title">Performance</h4>
                    <p class="text-stone-500 font-light leading-relaxed mb-12 flex-grow" data-i18n="level_3_desc">
                        Advanced bowing, contemporary improvisation, and stage preparation for professional use. Master the art.
                    </p>
                    
                    <div class="pt-6 border-t border-stone-200 flex justify-between items-center mt-auto">
                        <span class="text-[10px] uppercase tracking-widest text-stone-500 group-hover:text-stone-900 transition-colors" data-i18n="inquire">Inquire</span>
                        <div class="w-8 h-px bg-stone-300 group-hover:w-16 group-hover:bg-stone-900 transition-all duration-500"></div>
                    </div>
                </a>

            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer id="contact" class="pt-40 pb-12 px-6 md:px-12 bg-[#f2f0eb] border-t border-stone-300">
        <!-- Booking Widget Section -->
        <div id="booking" class="max-w-4xl mx-auto mb-32 reveal text-center">
            <h2 class="text-xs uppercase tracking-widest-xl text-stone-500 mb-12" data-i18n="booking_title">Schedule</h2>
            <div class="calendly-inline-widget w-full" data-url="https://calendly.com/erhu5030/30min?hide_event_type_details=1&hide_gdpr_banner=1" style="min-width:320px;height:700px;"></div>
            <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        </div>

        <div class="max-w-screen-2xl mx-auto flex flex-col items-center text-center reveal">
            <h2 class="text-6xl md:text-8xl lg:text-9xl font-serif text-stone-900 italic mb-12 hover:scale-105 transition-transform duration-[1.5s] ease-in-out cursor-pointer">
                <a href="mailto:contact@chiaohua.com" data-i18n="lets_play">Let's Play.</a>
            </h2>
            
            <div class="flex flex-col md:flex-row gap-8 md:gap-24 mb-24">
                <div>
                    <span class="block text-[10px] uppercase tracking-widest text-stone-400 mb-4" data-i18n="inquiries">Inquiries</span>
                    <a href="mailto:contact@chiaohua.com" class="text-lg md:text-xl font-serif text-stone-900 border-b border-transparent hover:border-stone-900 transition-all duration-500">contact@chiaohua.com</a>
                </div>
                <div>
                    <span class="block text-[10px] uppercase tracking-widest text-stone-400 mb-4" data-i18n="management">Management</span>
                    <span class="text-lg md:text-xl font-serif text-stone-900">+43 660 457 2474</span>
                </div>
                <div>
                    <span class="block text-[10px] uppercase tracking-widest text-stone-400 mb-4" data-i18n="follow">Follow</span>
                    <div class="flex gap-6">
                        <a href="#" class="text-stone-900 hover:opacity-50 transition-opacity duration-500">IG</a>
                        <a href="#" class="text-stone-900 hover:opacity-50 transition-opacity duration-500">Spotify</a>
                        <a href="#" class="text-stone-900 hover:opacity-50 transition-opacity duration-500">YT</a>
                    </div>
                </div>
            </div>

            <div class="w-full flex justify-between items-end border-t border-stone-300 pt-8">
                <span class="text-[10px] uppercase tracking-widest text-stone-400">© 2026 Chiao-Hua Chang</span>
                <a href="#hero" class="text-[10px] uppercase tracking-widest text-stone-400 hover:text-stone-900 transition-colors duration-500" data-i18n="back_to_top">Back to Top</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // --- TRANSLATION DATA ---
        const translations = {
            en: {
                close: "Close",
                about: "About",
                works: "Works",
                gallery: "Gallery",
                live: "Live",
                erhu: "The Erhu",
                education: "Education",
                contact: "Contact",
                menu: "Menu",
                location: "Vienna • Taiwan",
                hero_role: "Erhu Soloist / Vocals / Morin khuur / Educator",
                enter_portfolio: "View Selected Works",
                view_schedule: "Book Lesson",
                biography: "Biography",
                bio_headline: "Bridging continents through the resonance of two strings.",
                bio_body: "Based in Vienna since 2013, Chiao-Hua Chang creates a unique sonic dialogue between Eastern tradition and Western innovation. With a Master's in Ethnomusicology, she navigates the space between classical discipline and avant-garde improvisation.<br><br>Her diverse portfolio spans from the Orchestra of Cultures to experimental jazz at Porgy & Bess. She challenges the boundaries of the Erhu, proving it is a living, breathing voice in contemporary music.",
                years_teaching: "Years Teaching",
                ethnomusicology: "Ethnomusicology",
                archive: "Archive",
                selected_works: "Selected Works",
                works_quote: "Guided by two strings, journey across the world and explore life.",
                works_desc: "A curation of collaborations spanning jazz, theater, and classical arrangements.",
                visual_archive: "Visual Archive",
                gallery_desc: "A collection of moments, performances, and memories.",
                upcoming_performances: "Upcoming Performances",
                live_desc: "Explore upcoming venues and locations. Use the button below to see how far you are from each event.",
                find_distance: "Find Distance",
                the_erhu: "The Erhu",
                spirit_structure: "Spirit & Structure",
                erhu_intro: "\"More vocal than the violin, more ancient than the cello. A spike fiddle that sings the sorrow and joy of a thousand years.\"",
                history_label: "History",
                tang_dynasty: "Tang Dynasty",
                history_desc: "Originating over a millennium ago from the Xi people of Central Asia. Evolved through the Song and Ming dynasties.",
                material_label: "Material",
                ebony_snake: "Ebony & Python",
                material_desc: "The resonator box is covered with python skin, giving the erhu its distinctive, vocal-like quality.",
                sound_label: "Acoustics",
                vocal_timbre: "Vocal Timbre",
                sound_desc: "With the bow hair passing between the two strings, the sound is generated from within, creating an unbroken ribbon of tone.",
                technique_label: "Technique",
                expressivity: "Expressivity",
                technique_desc: "No fingerboard allows for deep vibrato and fluid portamento, mimicking the subtleties of human singing.",
                master_erhu: "Master the Erhu",
                edu_desc: "Whether you are a complete beginner or a professional musician looking to expand your timbre palette, Chiao-Hua offers a structured yet flexible curriculum.",
                edu_quote: "\"The erhu is the most vocal of instruments; it sings the thoughts you cannot speak.\"",
                meet_instructor: "Meet the Instructor",
                level_1: "Level I",
                level_1_title: "Fundamentals",
                level_1_desc: "Posture, Jianpu notation, open strings, and basic scales for the absolute beginner. Build a solid foundation.",
                level_2: "Level II",
                level_2_title: "Technique",
                level_2_desc: "Vibrato, shifting positions, glissando, and traditional folk repertoire development. Refine your voice.",
                level_3: "Level III",
                level_3_title: "Performance",
                level_3_desc: "Advanced bowing, contemporary improvisation, and stage preparation for professional use. Master the art.",
                inquire: "Inquire",
                booking_title: "Schedule",
                lets_play: "Let's Play.",
                inquiries: "Inquiries",
                management: "Management",
                follow: "Follow",
                back_to_top: "Back to Top",
                read_more: "Read More"
            },
            de: {
                close: "Schließen",
                about: "Über",
                works: "Werke",
                gallery: "Galerie",
                live: "Termine",
                erhu: "Die Erhu",
                education: "Unterricht",
                contact: "Kontakt",
                menu: "Menü",
                location: "Wien • Taiwan",
                hero_role: "Erhu-Solistin / Gesang / Morin Khuur / Pädagogin",
                enter_portfolio: "Ausgewählte Werke",
                view_schedule: "Stunde buchen",
                biography: "Biografie",
                bio_headline: "Zwei Saiten, die Kontinente verbinden.",
                bio_body: "Seit 2013 in Wien ansässig, schafft Chiao-Hua Chang einen einzigartigen klanglichen Dialog zwischen östlicher Tradition und westlicher Innovation. Mit einem Master in Musikethnologie bewegt sie sich im Spannungsfeld zwischen klassischer Disziplin und Avantgarde-Improvisation.<br><br>Ihr Portfolio reicht vom Orchester der Kulturen bis zu experimentellem Jazz im Porgy & Bess. Sie definiert die Grenzen der Erhu neu.",
                years_teaching: "Jahre Unterricht",
                ethnomusicology: "Musikethnologie",
                archive: "Archiv",
                selected_works: "Ausgewählte Werke",
                works_quote: "Geführt von zwei Saiten, eine Reise durch die Welt und das Leben.",
                works_desc: "Eine Kuration von Kollaborationen aus Jazz, Theater und klassischen Arrangements.",
                visual_archive: "Visuelles Archiv",
                gallery_desc: "Eine Sammlung von Momenten, Aufführungen und Erinnerungen.",
                upcoming_performances: "Kommende Auftritte",
                live_desc: "Entdecken Sie kommende Veranstaltungsorte. Nutzen Sie den Button, um die Entfernung zu sehen.",
                find_distance: "Entfernung",
                the_erhu: "Die Erhu",
                spirit_structure: "Geist & Struktur",
                erhu_intro: "\"Vokaler als die Geige, älter als das Cello. Eine Spießgeige, die den Schmerz und die Freude von tausend Jahren singt.\"",
                history_label: "Geschichte",
                tang_dynasty: "Tang Dynastie",
                history_desc: "Ursprung vor über einem Jahrtausend bei den Xi-Völkern Zentralasiens. Entwickelt durch die Song- und Ming-Dynastien.",
                material_label: "Material",
                ebony_snake: "Ebenholz & Python",
                material_desc: "Der Resonanzkörper ist mit Pythonhaut bespannt, was der Erhu ihre unverwechselbare, stimmähnliche Qualität verleiht.",
                sound_label: "Akustik",
                vocal_timbre: "Vokales Timbre",
                sound_desc: "Da das Bogenhaar zwischen den beiden Saiten verläuft, entsteht der Klang von innen heraus.",
                technique_label: "Technik",
                expressivity: "Ausdruckskraft",
                technique_desc: "Kein Griffbrett ermöglicht tiefes Vibrato und fließendes Portamento, das die Feinheiten des menschlichen Gesangs nachahmt.",
                master_erhu: "Erhu Meistern",
                edu_desc: "Ob Anfänger oder professioneller Musiker – Chiao-Hua bietet einen strukturierten und dennoch flexiblen Lehrplan.",
                edu_quote: "\"Die Erhu ist das vokalste aller Instrumente; sie singt die Gedanken, die man nicht aussprechen kann.\"",
                meet_instructor: "Lehrerin kennenlernen",
                level_1: "Stufe I",
                level_1_title: "Grundlagen",
                level_1_desc: "Haltung, Jianpu-Notation, leere Saiten und grundlegende Tonleitern für absolute Anfänger. Ein solides Fundament.",
                level_2: "Stufe II",
                level_2_title: "Technik",
                level_2_desc: "Vibrato, Lagenwechsel, Glissando und traditionelles Volksrepertoire. Verfeinern Sie Ihre Stimme.",
                level_3: "Stufe III",
                level_3_title: "Performance",
                level_3_desc: "Fortgeschrittene Bogentechnik, zeitgenössische Improvisation und Bühnenvorbereitung. Meisterschaft.",
                inquire: "Anfragen",
                booking_title: "Termin buchen",
                lets_play: "Let's Play.",
                inquiries: "Anfragen",
                management: "Management",
                follow: "Folgen",
                back_to_top: "Nach Oben",
                read_more: "Mehr lesen"
            },
            zh: {
                close: "關閉",
                about: "關於",
                works: "作品",
                gallery: "畫廊",
                live: "演出",
                erhu: "二胡",
                education: "教學",
                contact: "聯繫",
                menu: "選單",
                location: "維也納 • 台灣",
                hero_role: "二胡獨奏家 / 人聲 / 馬頭琴 / 教育家",
                enter_portfolio: "查看精選作品",
                view_schedule: "預約課程",
                biography: "簡介",
                bio_headline: "以兩根弦連接大陸的共鳴。",
                bio_body: "自2013年定居維也納以來，張巧華在東方傳統與西方創新之間創造了獨特的對話。擁有民族音樂學碩士學位，她遊走於古典紀律與先鋒即興之間。<br><br>她的作品涵蓋了從文化管弦樂團到Porgy & Bess的實驗爵士樂。她挑戰二胡的界限，證明它是當代音樂中鮮活的聲音。",
                years_teaching: "多年教學經驗",
                ethnomusicology: "民族音樂學",
                archive: "檔案",
                selected_works: "精選作品",
                works_quote: "透過兩條弦，旅行世界，體驗人生。",
                works_desc: "跨越爵士、戲劇和古典改編的合作精選。",
                visual_archive: "視覺檔案",
                gallery_desc: "時刻、表演與記憶的集合。",
                upcoming_performances: "近期演出",
                live_desc: "探索即將到來的演出地點。使用下方按鈕查看距離。",
                find_distance: "搜尋距離",
                the_erhu: "二胡",
                spirit_structure: "精神與結構",
                erhu_intro: "「比小提琴更具歌唱性，比大提琴更古老。一把唱出千年悲喜的胡琴。」",
                history_label: "歷史",
                tang_dynasty: "唐朝",
                history_desc: "源於千年前的中亞奚人。歷經宋明兩代的演變。",
                material_label: "材質",
                ebony_snake: "烏木與蟒皮",
                material_desc: "琴筒蒙以蟒皮，賦予二胡獨特的人聲特質。",
                sound_label: "聲學",
                vocal_timbre: "人聲特質",
                sound_desc: "弓毛在兩弦之間運行，聲音由內而生，形成連綿不斷的音流。",
                technique_label: "技法",
                expressivity: "表現力",
                technique_desc: "無指板設計允許深沉的揉弦和流暢的滑音，模仿人聲的細膩。",
                master_erhu: "掌握二胡",
                edu_desc: "無論您是初學者還是尋求擴展音色的專業音樂家，巧華都提供結構化且靈活的課程。",
                edu_quote: "「二胡是最具歌唱性的樂器；它唱出你無法言說的心聲。」",
                meet_instructor: "認識導師",
                level_1: "第一級",
                level_1_title: "基礎",
                level_1_desc: "姿勢、簡譜、空弦和基礎音階，適合零基礎學者。建立堅實的基礎。",
                level_2: "第二級",
                level_2_title: "技巧",
                level_2_desc: "揉弦、換把、滑音和傳統民歌 repertoire。雕琢您的聲音。",
                level_3: "第三級",
                level_3_title: "演奏",
                level_3_desc: "高級運弓、當代即興和舞台準備。掌握藝術。",
                inquire: "諮詢",
                booking_title: "預約課程",
                lets_play: "合作演出",
                inquiries: "諮詢",
                management: "管理",
                follow: "關注",
                back_to_top: "回到頂部",
                read_more: "閱讀更多"
            }
        };

        function changeLanguage(lang) {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    // Check if it has html content (like bio_body)
                    if (key === 'bio_body') {
                        el.innerHTML = translations[lang][key];
                    } else {
                        el.textContent = translations[lang][key];
                    }
                }
            });

            // Update Fonts for Chinese
            if (lang === 'zh') {
                document.body.classList.add('font-chinese');
            } else {
                document.body.classList.remove('font-chinese');
            }

            // Update Active State on Buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if(btn.dataset.lang === lang) {
                    btn.classList.remove('opacity-50');
                    btn.classList.add('opacity-100', 'font-bold');
                } else {
                    btn.classList.remove('opacity-100', 'font-bold');
                    btn.classList.add('opacity-50');
                }
            });
        }

        // --- GALLERY GENERATION ---
        const galleryContainer = document.getElementById('gallery-grid');
        
        // New MP4 Data provided by user
        const newVideos = [
            { type: 'mp4', src: 'https://i.imgur.com/NQb1Dzv.mp4', title: 'Composer: Ambrož Čopi', desc: 'Conductor: Slaven Kulenović | Slovenska filharmonija' },
            { type: 'mp4', src: 'https://i.imgur.com/kiSVXL0.mp4', title: 'Zaświeć Niesiądzu', desc: 'Przemysław Strączek (gtr), Buba Badjie Kuyateh (kora)' },
            { type: 'mp4', src: 'https://i.imgur.com/Ki75gD8.mp4', title: 'Second Lockdown', desc: 'Eldis La Rosa, Hibiki Kojima, Gregor Aufmesser' },
            { type: 'mp4', src: 'https://i.imgur.com/Ubg9Y8L.mp4', title: 'Sommersturm, Vivaldi', desc: 'Chinesischer Nationalcircus | Orchester der Kulturen' },
            { type: 'mp4', src: 'https://i.imgur.com/ewTrPOT.mp4', title: 'We are atoms', desc: 'Przemysław Strączek' },
            { type: 'mp4', src: 'https://i.imgur.com/5nI7bXp.mp4', title: 'Eldis Theme', desc: 'Porgy & Bess | Eldis La Rosa, Igor Gross, Victoria Kirilova' },
            { type: 'mp4', src: 'https://i.imgur.com/x9seIDH.mp4', title: 'Brak', desc: 'Przemysław Strączek (gtr), Chiao-Hua Chang (Morin khuur)' }
        ];

        // Existing YouTube Data
        // Filtered out to avoid duplicates with Selected Works section
        const youtubeIds = [];

        // Existing Image Data
        const imageUrls = [
            {
                src: 'https://i.imgur.com/kuYmchs.jpeg',
                title: 'Strączek & Chang',
                desc: 'Guitar & Morin khuur • 01/06/21 • Stara Łaźnia Moszczenica'
            },
            {
                src: 'https://i.imgur.com/ibq2EmY.jpeg',
                title: 'Strączek & Chang',
                desc: 'Guitar & Morin khuur • 01/06/21 • Stara Łaźnia Moszczenica'
            },
            {
                src: 'https://i.imgur.com/7aamYM6.jpeg',
                title: 'ZyrusTraveller / Matrix / NeinBabaNein',
                desc: '',
                css: 'object-position: 50% 20%;' 
            },
            {
                src: 'https://i.imgur.com/yy7B5Ei.jpeg',
                title: 'Der West-Östliche Artmann',
                desc: 'Tehran'
            },
            {
                src: 'https://i.imgur.com/rt5Hayb.jpeg',
                title: 'Eldis La Rosa - Colores',
                desc: 'Sargfabrik • Vienna'
            },
            {
                src: 'https://i.imgur.com/cRFM018.jpeg',
                title: 'Eldis La Rosa - Colores',
                desc: 'Sargfabrik • Vienna'
            },
            {
                src: 'https://i.imgur.com/QUqMozB.png',
                title: 'Orchester der Kulturen',
                desc: 'Horse racing • Mongolisches Pferderennen'
            },
            {
                src: 'https://i.imgur.com/yKJMsw5.jpeg',
                title: 'Haag Sommertheater',
                desc: 'Don Quijote • Eldis La Rosa'
            },
            {
                src: 'https://i.imgur.com/KbmCD77.jpeg',
                title: 'Budapest Liszt Music Hall',
                desc: 'Contemporary Music'
            },
            // Older images kept as fallback/fillers
            'https://i.imgur.com/Dy3QQIv.jpeg',
            'https://i.imgur.com/N8Ql1Qr.jpeg',
            'https://i.imgur.com/CjnpDgT.jpeg',
            'https://i.imgur.com/HjBYIC4.jpeg',
            'https://i.imgur.com/rmz6wmG.jpeg',
            'https://i.imgur.com/HRi4Go3.jpeg',
            'https://i.imgur.com/IUYFTIJ.jpeg'
        ];

        // Combine all items
        const items = [];
        
        // Add new MP4s
        newVideos.forEach(v => items.push(v));

        // Add YouTube videos
        youtubeIds.forEach(id => {
            // OPTIMIZATION: Use hqdefault.jpg (High Quality) instead of mqdefault (Medium)
            // mqdefault is 320x180 (too blurry), hqdefault is 480x360 (better balance)
            // maxresdefault often fails, causing grey boxes.
            items.push({ type: 'youtube', src: id, thumb: `https://img.youtube.com/vi/${id}/hqdefault.jpg` });
        });

        // Add Images
        imageUrls.forEach(img => {
            if (typeof img === 'string') {
                items.push({ type: 'image', src: img, thumb: img });
            } else {
                items.push({ type: 'image', src: img.src, thumb: img.src, title: img.title, desc: img.desc, css: img.css });
            }
        });

        // Shuffle
        items.sort(() => Math.random() - 0.5);

        // Render Gallery
        items.forEach((item, idx) => {
            const el = document.createElement('div');
            el.className = "aspect-square bg-stone-800 overflow-hidden relative group cursor-pointer border border-stone-800/50 hover:border-stone-500 transition-all duration-700 ease-out";
            
            if(item.type === 'youtube') {
                el.innerHTML = `
                    <img src="${item.thumb}" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-all duration-1000">
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div class="w-8 h-8 rounded-full border border-white/50 bg-black/30 flex items-center justify-center backdrop-blur-sm group-hover:bg-stone-900 group-hover:border-white transition-all duration-500">
                             <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" class="ml-0.5"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                        </div>
                    </div>
                `;
                el.onclick = () => openVideo('youtube', item.src);
            } else if (item.type === 'mp4') {
                el.innerHTML = `
                    <video src="${item.src}" class="w-full h-full object-cover group-hover:scale-110 transition-all duration-1000" muted loop playsinline onmouseover="this.play()" onmouseout="this.pause();this.currentTime=0;" loading="lazy"></video>
                    <div class="absolute inset-0 flex flex-col justify-end p-4 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none">
                        <p class="text-[10px] uppercase tracking-widest text-white/90 truncate">${item.title}</p>
                    </div>
                `;
                el.onclick = () => openVideo('mp4', item.src, item.title, item.desc);
            } else {
                // Image handling with optional caption overlay and custom styles
                let captionHtml = '';
                if (item.title || item.desc) {
                    captionHtml = `
                        <div class="absolute inset-0 flex flex-col justify-end p-6 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none">
                            <p class="text-white font-serif text-lg leading-tight mb-1 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-100">${item.title || ''}</p>
                            <p class="text-stone-300 text-[10px] uppercase tracking-widest transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-200">${item.desc || ''}</p>
                        </div>
                    `;
                }

                // Add custom styles (like focal point) to the image tag
                const styleAttr = item.css ? `style="${item.css}"` : '';

                el.innerHTML = `
                    <img src="${item.thumb}" ${styleAttr} loading="lazy" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-1000">
                    <div class="absolute inset-0 bg-stone-900/20 group-hover:bg-transparent transition-colors duration-700"></div>
                    ${captionHtml}
                `;
            }
            galleryContainer.appendChild(el);
        });

        // --- CONCERT DATA ---
        // Cleared concerts as requested, keeping structure ready for future data
        const concerts = [];

        // --- MAP LOGIC ---
        const map = L.map('concert-map', { center: [48.2082, 16.3738], zoom: 12, scrollWheelZoom: false, zoomControl: false });
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap &copy; CARTO', subdomains: 'abcd', maxZoom: 20
        }).addTo(map);
        L.control.zoom({ position: 'bottomright' }).addTo(map);

        const concertList = document.getElementById('concert-list');
        
        if (concerts.length === 0) {
            concertList.innerHTML = '<div class="py-8 text-center text-stone-500 italic">No upcoming performances scheduled at the moment.</div>';
        } else {
            concerts.forEach((c, index) => {
                const marker = L.marker(c.coords).addTo(map);
                marker.bindPopup(`<b>${c.venue}</b><br>${c.date}<br>${c.title}`);

                const item = document.createElement('div');
                item.className = "group grid grid-cols-1 md:grid-cols-12 py-8 border-b border-stone-300 hover:bg-stone-200/50 transition-colors duration-700 items-start reveal";
                item.innerHTML = `
                    <div class="md:col-span-2 text-xs uppercase tracking-widest text-stone-500 mb-2 md:mb-0">${c.date}</div>
                    <div class="md:col-span-4">
                        <div class="text-2xl font-serif text-stone-900 group-hover:italic transition-all duration-500 leading-tight">${c.venue}</div>
                        <div class="text-xs text-stone-500 mt-1">${c.address}</div>
                    </div>
                    <div class="md:col-span-4 mt-4 md:mt-0">
                        <div class="text-lg font-serif text-stone-800">${c.title}</div>
                        <div class="text-sm text-stone-600 font-light italic">${c.details}</div>
                    </div>
                    <div class="md:col-span-2 flex flex-col items-end justify-center mt-4 md:mt-0 gap-2">
                        <a href="https://www.google.com/maps/dir/?api=1&destination=${c.coords[0]},${c.coords[1]}" target="_blank" class="text-[10px] uppercase tracking-widest text-stone-600 hover:text-stone-900 border-b border-stone-300 hover:border-stone-900 transition-all duration-500 flex items-center gap-1">
                            <span data-i18n="find_distance">Get Directions</span> <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
                        </a>
                        <span class="distance-display text-[10px] font-mono text-stone-400 opacity-0 transition-opacity duration-700" id="dist-${index}"></span>
                    </div>
                `;
                item.addEventListener('mouseenter', () => marker.openPopup());
                concertList.appendChild(item);
            });
            const group = new L.featureGroup(concerts.map(c => L.marker(c.coords)));
            map.fitBounds(group.getBounds().pad(0.1));
        }

        function calculateDistances() {
            const status = document.getElementById('geo-status');
            const btn = document.getElementById('distance-btn');
            status.textContent = "Locating...";
            btn.disabled = true;

            if (!navigator.geolocation) {
                status.textContent = "Geolocation not supported";
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const userLat = position.coords.latitude;
                    const userLng = position.coords.longitude;
                    const userIcon = L.divIcon({ className: 'user-marker', html: '<div style="background-color:#ef4444;width:12px;height:12px;border-radius:50%;border:2px solid white;box-shadow:0 2px 4px rgba(0,0,0,0.3);"></div>', iconSize: [12, 12] });
                    L.marker([userLat, userLng], {icon: userIcon}).addTo(map).bindPopup("You are here").openPopup();
                    map.setView([userLat, userLng], 10);

                    concerts.forEach((c, index) => {
                        const dist = getDistanceFromLatLonInKm(userLat, userLng, c.coords[0], c.coords[1]);
                        const distEl = document.getElementById(`dist-${index}`);
                        distEl.textContent = `${dist.toFixed(1)} km`;
                        distEl.classList.remove('opacity-0');
                    });

                    status.textContent = "Distances updated";
                    btn.classList.add('bg-stone-900', 'text-white');
                    btn.innerHTML = "Updated";
                },
                () => {
                    status.textContent = "Unable to retrieve location";
                    btn.disabled = false;
                }
            );
        }

        function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
            var R = 6371; 
            var dLat = deg2rad(lat2 - lat1);  
            var dLon = deg2rad(lon2 - lon1); 
            var a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon/2) * Math.sin(dLon/2); 
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
            var d = R * c; 
            return d;
        }
        function deg2rad(deg) { return deg * (Math.PI/180) }


        // --- UPDATED VIDEO PLAYER LOGIC ---
        const modal = document.getElementById('video-modal');
        const bioModal = document.getElementById('bio-modal');
        const iframe = document.getElementById('youtube-frame');
        const mp4Player = document.getElementById('mp4-player');
        const caption = document.getElementById('modal-caption');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const closeBioBtn = document.getElementById('close-bio-btn');

        function openVideo(type, src, title, desc) {
            modal.classList.remove('hidden');
            modal.classList.remove('pointer-events-none'); // Enable interactions
            
            // Reset players
            iframe.classList.add('hidden');
            iframe.src = "";
            mp4Player.classList.add('hidden');
            mp4Player.pause();
            mp4Player.src = "";
            caption.innerHTML = "";

            if (type === 'youtube') {
                iframe.classList.remove('hidden');
                iframe.src = `https://www.youtube.com/embed/${src}?autoplay=1&rel=0&playsinline=1`;
            } else if (type === 'mp4') {
                mp4Player.classList.remove('hidden');
                mp4Player.src = src;
                mp4Player.play().catch(e => console.log('Autoplay blocked')); // Simple error handling
                
                if(title || desc) {
                    caption.innerHTML = `<span class="block text-white mb-1">${title || ''}</span><span class="text-sm opacity-70">${desc || ''}</span>`;
                }
            } else {
                // If the type is just a string (like from the instructor video), treat it as an ID or file
                if(type === 'rxZoz5K') {
                    mp4Player.classList.remove('hidden');
                    mp4Player.src = "https://i.imgur.com/rxZoz5K.mp4";
                    mp4Player.play();
                    caption.innerHTML = "Instructor Introduction";
                } else {
                     iframe.classList.remove('hidden');
                     iframe.src = `https://www.youtube.com/embed/${type}?autoplay=1&rel=0&playsinline=1`;
                }
            }

            setTimeout(() => { modal.classList.remove('opacity-0'); }, 50);
            document.body.style.overflow = 'hidden';
        }

        function closeVideo() {
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.add('pointer-events-none');
                iframe.src = '';
                mp4Player.pause();
                mp4Player.src = '';
                document.body.style.overflow = '';
            }, 700);
        }

        function openBioModal() {
            bioModal.classList.remove('hidden');
            bioModal.classList.remove('pointer-events-none');
            setTimeout(() => { bioModal.classList.remove('opacity-0'); }, 50);
            document.body.style.overflow = 'hidden';
        }

        function closeBioModal() {
            bioModal.classList.add('opacity-0');
            setTimeout(() => {
                bioModal.classList.add('hidden');
                bioModal.classList.add('pointer-events-none');
                document.body.style.overflow = '';
            }, 700);
        }

        closeModalBtn.addEventListener('click', closeVideo);
        closeBioBtn.addEventListener('click', closeBioModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeVideo(); });
        bioModal.addEventListener('click', (e) => { if (e.target === bioModal) closeBioModal(); });
        
        document.addEventListener('keydown', (e) => { 
            if (e.key === 'Escape') {
                if (!modal.classList.contains('hidden')) closeVideo();
                if (!bioModal.classList.contains('hidden')) closeBioModal();
            }
        });

        // --- SCROLL REVEAL ---
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    observer.unobserve(entry.target);
                }
            });
        }, { root: null, rootMargin: '0px', threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // --- MOBILE MENU ---
        const menuBtn = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileLinks = document.querySelectorAll('.mobile-link');
        let isMenuOpen = false;

        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                mobileMenu.classList.remove('translate-y-full');
                mobileMenu.classList.add('translate-y-0');
                menuBtn.textContent = 'Close';
                document.body.style.overflow = 'hidden';
            } else {
                mobileMenu.classList.add('translate-y-full');
                mobileMenu.classList.remove('translate-y-0');
                menuBtn.textContent = 'Menu';
                document.body.style.overflow = '';
            }
        });

        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                isMenuOpen = false;
                mobileMenu.classList.add('translate-y-full');
                mobileMenu.classList.remove('translate-y-0');
                menuBtn.textContent = 'Menu';
                document.body.style.overflow = '';
            });
        });

        // --- NAVBAR SCROLL ---
        const navbar = document.getElementById('navbar');
        const navBrand = document.getElementById('nav-brand');
        const navDesktop = document.getElementById('nav-desktop');
        const navToggle = document.getElementById('menu-toggle');

        window.addEventListener('scroll', () => {
            const isScrolled = window.scrollY > 50;
            
            if (isScrolled) {
                // Scrolled state: Light background, readable dark text
                navbar.classList.add('bg-[#f2f0eb]/95', 'backdrop-blur-md', 'shadow-sm', 'py-4');
                navbar.classList.remove('py-8');
                
                // Remove blend mode so text stays dark on light background
                navBrand.classList.remove('mix-blend-difference');
                navDesktop.classList.remove('mix-blend-difference');
                navToggle.classList.remove('mix-blend-difference');
            } else {
                // Top state: Transparent background, blend mode for video contrast
                navbar.classList.remove('bg-[#f2f0eb]/95', 'backdrop-blur-md', 'shadow-sm', 'py-4');
                navbar.classList.add('py-8');
                
                // Add blend mode back
                navBrand.classList.add('mix-blend-difference');
                navDesktop.classList.add('mix-blend-difference');
                navToggle.classList.add('mix-blend-difference');
            }
        });
    </script>
</body>
</html>
