import React, { useState, useEffect, useRef } from 'react';
import { Play, ArrowRight, Instagram, Mail, Globe, MoveRight, Minus } from 'lucide-react';

const App = () => {
  const [activeSection, setActiveSection] = useState('hero');
  const [menuOpen, setMenuOpen] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      const sections = ['hero', 'about', 'erhu', 'works', 'contact'];
      const current = sections.find(section => {
        const element = document.getElementById(section);
        if (element) {
          const rect = element.getBoundingClientRect();
          return rect.top >= -300 && rect.top <= 300;
        }
        return false;
      });
      if (current) setActiveSection(current);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollTo = (id) => {
    setMenuOpen(false);
    document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
  };

  return (
    <div className="bg-neutral-950 min-h-screen text-neutral-300 font-sans selection:bg-white selection:text-black">
      
      {/* Fixed Navigation - Minimalist/Floating */}
      <nav className="fixed top-0 left-0 w-full z-50 px-6 py-6 md:px-12 flex justify-between items-center mix-blend-difference text-white">
        <div className="font-serif tracking-widest text-sm md:text-base font-bold uppercase cursor-pointer z-50" onClick={() => scrollTo('hero')}>
          C / C
        </div>

        {/* Desktop Menu - Hidden on mobile */}
        <div className="hidden md:flex gap-12 text-xs tracking-[0.2em] uppercase font-medium">
          {['About', 'Erhu', 'Works', 'Contact'].map((item) => (
            <button 
              key={item}
              onClick={() => scrollTo(item.toLowerCase())}
              className={`hover:text-neutral-400 transition-all duration-500 relative group ${activeSection === item.toLowerCase() ? 'text-white' : 'text-neutral-500'}`}
            >
              {item}
              <span className={`absolute -bottom-2 left-0 w-full h-[1px] bg-white scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left ${activeSection === item.toLowerCase() ? 'scale-x-100' : ''}`}></span>
            </button>
          ))}
        </div>

        {/* Mobile Menu Toggle */}
        <button 
          className="md:hidden z-50 text-xs tracking-widest uppercase"
          onClick={() => setMenuOpen(!menuOpen)}
        >
          {menuOpen ? 'Close' : 'Menu'}
        </button>
      </nav>

      {/* Mobile Menu Overlay */}
      <div className={`fixed inset-0 bg-neutral-950 z-40 flex flex-col justify-center items-center gap-8 transition-transform duration-700 ease-[0.19,1,0.22,1] ${menuOpen ? 'translate-y-0' : '-translate-y-full'}`}>
        {['About', 'Erhu', 'Works', 'Contact'].map((item) => (
          <button 
            key={item}
            onClick={() => scrollTo(item.toLowerCase())}
            className="font-serif text-4xl text-neutral-400 hover:text-white transition-colors"
          >
            {item}
          </button>
        ))}
      </div>

      {/* HERO SECTION */}
      <section id="hero" className="relative h-screen w-full flex flex-col justify-center items-center overflow-hidden">
        {/* Background Image with sophisticated overlay */}
        <div className="absolute inset-0 z-0">
          <img 
            src="https://images.unsplash.com/photo-1519683109079-d5f539e1c0c3?q=80&w=2074&auto=format&fit=crop" 
            alt="Texture" 
            className="w-full h-full object-cover opacity-20 scale-105 animate-slow-zoom"
          />
          <div className="absolute inset-0 bg-gradient-to-b from-neutral-950/50 via-neutral-950/20 to-neutral-950"></div>
        </div>

        <div className="relative z-10 flex flex-col items-center text-center px-6">
          <div className="mb-6 flex flex-col items-center gap-4 opacity-0 animate-fade-in-up">
            <div className="h-16 w-[1px] bg-neutral-700"></div>
            <span className="text-xs tracking-[0.3em] uppercase text-neutral-500">Vienna &bull; Taiwan</span>
          </div>
          
          <h1 className="font-serif text-6xl md:text-8xl lg:text-9xl tracking-tight text-white mb-6 opacity-0 animate-fade-in-up delay-200">
            Chiao-Hua <br className="md:hidden"/> Chang
          </h1>
          
          <p className="font-light text-neutral-400 tracking-wide text-sm md:text-lg max-w-lg leading-relaxed mb-12 opacity-0 animate-fade-in-up delay-300">
            Erhu Soloist & Ethnomusicologist
          </p>

          <button 
            onClick={() => scrollTo('about')}
            className="group flex items-center gap-4 text-xs tracking-[0.2em] uppercase text-white hover:text-neutral-400 transition-colors opacity-0 animate-fade-in-up delay-500"
          >
            Enter Portfolio
            <ArrowRight size={14} className="group-hover:translate-x-2 transition-transform duration-500"/>
          </button>
        </div>
      </section>

      {/* ABOUT SECTION - Editorial Layout */}
      <section id="about" className="py-32 px-6 md:px-12 max-w-screen-2xl mx-auto">
        <div className="flex flex-col lg:flex-row gap-20 lg:gap-32 items-start">
          
          {/* Left Column: Image */}
          <div className="w-full lg:w-5/12 relative group">
            <div className="overflow-hidden bg-neutral-900 aspect-[3/4] cursor-none">
              <img 
                src="https://i.imgur.com/G7ejuzi.png" 
                alt="Chiao-Hua Chang" 
                className="w-full h-full object-cover grayscale opacity-80 group-hover:grayscale-0 group-hover:opacity-100 group-hover:scale-105 transition-all duration-1000 ease-out"
              />
            </div>
            <div className="absolute -bottom-6 -right-6 text-9xl font-serif text-neutral-800 -z-10 opacity-50 hidden md:block">
              01
            </div>
          </div>

          {/* Right Column: Text */}
          <div className="w-full lg:w-6/12 pt-12">
            <h2 className="text-xs font-bold tracking-[0.3em] uppercase text-neutral-500 mb-8 flex items-center gap-4">
              <span className="w-8 h-[1px] bg-neutral-600"></span>
              The Artist
            </h2>
            
            <h3 className="font-serif text-4xl md:text-5xl text-white leading-tight mb-12">
              Bridging continents through <br/> the resonance of two strings.
            </h3>

            <div className="space-y-8 text-neutral-400 font-light leading-loose text-sm md:text-base border-l border-neutral-800 pl-8">
              <p>
                Based in Vienna since 2013, Chiao-Hua Chang creates a unique sonic dialogue between Eastern tradition and Western innovation. With a Master's in Ethnomusicology and a background rooted in 12 years of teaching in Taiwan, she navigates the space between classical discipline and avant-garde improvisation.
              </p>
              <p>
                Her diverse portfolio spans from the <span className="text-white">Orchestra of Cultures</span> under Adrian Werum to experimental jazz at <span className="text-white">Porgy & Bess</span>. She challenges the boundaries of the Erhu, proving it is not merely an artifact of the past, but a living, breathing voice in contemporary music.
              </p>
            </div>

            <div className="mt-16 grid grid-cols-2 gap-8 border-t border-neutral-900 pt-8">
               <div>
                 <span className="block text-2xl font-serif text-white mb-1">15+</span>
                 <span className="text-xs tracking-widest uppercase text-neutral-600">Years Teaching</span>
               </div>
               <div>
                 <span className="block text-2xl font-serif text-white mb-1">MA</span>
                 <span className="text-xs tracking-widest uppercase text-neutral-600">Ethnomusicology</span>
               </div>
            </div>
          </div>
        </div>
      </section>

      {/* THE ERHU - Immersive Feature */}
      <section id="erhu" className="py-32 bg-neutral-900/30 border-y border-neutral-900">
        <div className="max-w-screen-xl mx-auto px-6 md:px-12">
           <div className="text-center mb-24">
             <span className="text-xs font-bold tracking-[0.3em] uppercase text-neutral-500">The Instrument</span>
             <h2 className="font-serif text-5xl md:text-7xl mt-6 text-white opacity-90">The Erhu</h2>
           </div>

           <div className="grid md:grid-cols-3 gap-12 items-center">
             <div className="space-y-12 text-right hidden md:block">
               <div className="group">
                 <h4 className="text-white font-serif text-xl mb-2 group-hover:text-amber-700 transition-colors">Origins</h4>
                 <p className="text-xs text-neutral-500 leading-relaxed uppercase tracking-wide">Tang Dynasty <br/> ~1000 Years Ago</p>
               </div>
               <div className="group">
                 <h4 className="text-white font-serif text-xl mb-2 group-hover:text-amber-700 transition-colors">Resonance</h4>
                 <p className="text-xs text-neutral-500 leading-relaxed uppercase tracking-wide">Snakeskin Soundbox <br/> Vocal Quality</p>
               </div>
             </div>

             <div className="relative h-[600px] flex justify-center items-center group">
                <div className="absolute inset-0 bg-amber-900/10 blur-[100px] rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-1000"></div>
                {/* Stylized representation of the instrument strings/bow */}
                <div className="w-[1px] h-full bg-neutral-800 relative overflow-hidden">
                  <div className="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-transparent via-white to-transparent opacity-20 animate-pulse"></div>
                </div>
                <div className="w-[1px] h-full bg-neutral-800 ml-2 relative overflow-hidden">
                  <div className="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-transparent via-white to-transparent opacity-20 animate-pulse delay-75"></div>
                </div>
                
                {/* Image Overlay */}
                <img 
                  src="https://images.unsplash.com/photo-1516280440614-6697288d5d38?q=80&w=1470&auto=format&fit=crop" 
                  className="absolute h-full w-full object-cover opacity-60 mix-blend-overlay grayscale hover:grayscale-0 transition-all duration-1000"
                  alt="Erhu Detail"
                />
             </div>

             <div className="space-y-12 text-left">
               <div className="group">
                 <h4 className="text-white font-serif text-xl mb-2 group-hover:text-amber-700 transition-colors">Structure</h4>
                 <p className="text-xs text-neutral-500 leading-relaxed uppercase tracking-wide">Two Strings <br/> Fixed Bow</p>
               </div>
               <div className="group">
                 <h4 className="text-white font-serif text-xl mb-2 group-hover:text-amber-700 transition-colors">Range</h4>
                 <p className="text-xs text-neutral-500 leading-relaxed uppercase tracking-wide">3.5 Octaves <br/> Highly Expressive</p>
               </div>
             </div>
           </div>
        </div>
      </section>

      {/* SELECTED WORKS - Horizontal List / Brutalist */}
      <section id="works" className="py-32 px-6 md:px-12 max-w-screen-2xl mx-auto">
        <div className="flex justify-between items-end mb-20 border-b border-neutral-900 pb-6">
          <h2 className="font-serif text-4xl text-white">Selected Works</h2>
          <span className="text-xs tracking-[0.3em] uppercase text-neutral-600 hidden md:block">Archive 2013—Present</span>
        </div>

        <div className="flex flex-col">
          {[
            {
              title: "Three Continents",
              role: "Instrumentalist",
              collab: "Przemysław Strączek",
              year: "2023",
              img: "https://www.cincinnati.com/gcdn/authoring/authoring-images/2024/02/19/PCIN/72662140007-don-q-1.jpg?width=700&height=467&fit=crop&format=pjpg&auto=webp"
            },
            {
              title: "Don Quixote",
              role: "Theatrical Performance",
              collab: "Haag Summer Theatre",
              year: "2021",
              img: "https://images.unsplash.com/photo-1465847899078-b413929f7120?auto=format&fit=crop&q=80&w=800"
            },
            {
              title: "Porgy & Bess",
              role: "Jazz Improvisation",
              collab: "Otto Lechner",
              year: "2019",
              img: "https://images.unsplash.com/photo-1511192336575-5a79af67a629?auto=format&fit=crop&q=80&w=800"
            }
          ].map((project, index) => (
            <div key={index} className="group relative border-b border-neutral-900 py-12 cursor-pointer hover:bg-neutral-900/30 transition-colors duration-500">
              <div className="flex flex-col md:flex-row justify-between items-start md:items-center relative z-10 px-4">
                <div className="flex items-baseline gap-6 md:w-1/3">
                  <span className="text-xs text-neutral-700 font-mono">0{index + 1}</span>
                  <h3 className="text-2xl md:text-3xl font-serif text-neutral-400 group-hover:text-white transition-colors">{project.title}</h3>
                </div>
                <div className="hidden md:block md:w-1/3 text-xs tracking-widest uppercase text-neutral-600 group-hover:text-neutral-400 transition-colors">
                  {project.collab}
                </div>
                <div className="mt-4 md:mt-0 md:w-1/3 text-right">
                  <span className="text-xs tracking-widest uppercase text-neutral-600 group-hover:text-white transition-colors">{project.role}</span>
                </div>
              </div>
              
              {/* Hover Image Reveal */}
              <div className="hidden md:block absolute top-1/2 left-2/3 -translate-y-1/2 -translate-x-1/2 w-64 h-40 opacity-0 group-hover:opacity-100 transition-all duration-500 pointer-events-none z-20 overflow-hidden grayscale group-hover:grayscale-0">
                <img src={project.img} alt={project.title} className="w-full h-full object-cover scale-110 group-hover:scale-100 transition-transform duration-700"/>
              </div>
            </div>
          ))}
        </div>
        
        <div className="mt-16 text-center">
            <a href="https://www.instagram.com/chiaohuaerhu/?hl=en" target="_blank" rel="noreferrer" className="inline-flex items-center gap-2 text-xs tracking-[0.2em] uppercase text-neutral-500 hover:text-white transition-colors border-b border-transparent hover:border-white pb-1">
              View Instagram Archive <MoveRight size={14}/>
            </a>
        </div>
      </section>

      {/* PRIVATE LESSONS - Minimalist Cards */}
      <section id="lessons" className="py-32 bg-neutral-100 text-neutral-900">
        <div className="max-w-screen-xl mx-auto px-6 md:px-12">
          <div className="md:w-1/2 mb-20">
             <h2 className="font-serif text-5xl mb-6">Pedagogy</h2>
             <p className="text-neutral-600 font-light leading-relaxed">
               Private instruction for dedicated students. Curriculum is tailored to individual goals, spanning from traditional Chinese technique to contemporary improvisation.
             </p>
          </div>

          <div className="grid md:grid-cols-3 gap-px bg-neutral-300 border border-neutral-300">
             {[
               { level: "Level I", title: "Fundamentals", desc: "Posture, Jianpu notation, open strings, and basic scales." },
               { level: "Level II", title: "Technique", desc: "Vibrato, shifting positions, glissando, and folk repertoire." },
               { level: "Level III", title: "Performance", desc: "Advanced bowing, improvisation, and stage preparation." }
             ].map((lesson, i) => (
               <div key={i} className="bg-neutral-100 p-12 hover:bg-white transition-colors duration-500 group flex flex-col justify-between h-[400px]">
                 <div>
                   <span className="text-xs font-bold tracking-[0.2em] uppercase text-neutral-400 group-hover:text-amber-700 transition-colors">{lesson.level}</span>
                   <h3 className="font-serif text-3xl mt-4 mb-6">{lesson.title}</h3>
                   <div className="w-8 h-[1px] bg-neutral-300 group-hover:w-16 group-hover:bg-amber-700 transition-all duration-500 mb-6"></div>
                   <p className="text-neutral-500 text-sm leading-relaxed">{lesson.desc}</p>
                 </div>
                 <button className="self-start text-xs font-bold tracking-widest uppercase opacity-0 -translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-500 delay-100">
                   Inquire
                 </button>
               </div>
             ))}
          </div>
        </div>
      </section>

      {/* FOOTER - Contact */}
      <footer id="contact" className="py-32 px-6 md:px-12 bg-neutral-950 text-center relative overflow-hidden">
         <div className="relative z-10">
           <h2 className="font-serif text-4xl md:text-6xl text-neutral-800 mb-12">Collaborate</h2>
           
           <div className="inline-flex flex-col gap-8">
             <a href="mailto:contact@chiaohua.com" className="text-2xl md:text-4xl text-white hover:text-amber-700 transition-colors font-serif italic">
               contact@chiaohua.com
             </a>
             
             <div className="flex justify-center gap-12 mt-8">
                <a href="https://www.instagram.com/chiaohuaerhu/?hl=en" className="text-xs tracking-[0.2em] uppercase text-neutral-500 hover:text-white transition-colors">Instagram</a>
                <a href="#" className="text-xs tracking-[0.2em] uppercase text-neutral-500 hover:text-white transition-colors">Soundcloud</a>
                <a href="#" className="text-xs tracking-[0.2em] uppercase text-neutral-500 hover:text-white transition-colors">LinkedIn</a>
             </div>
           </div>
           
           <div className="mt-32 text-[10px] tracking-[0.2em] uppercase text-neutral-800">
             &copy; {new Date().getFullYear()} Chiao-Hua Chang. Vienna.
           </div>
         </div>
      </footer>
      
      <style>{`
        @keyframes fade-in-up {
          0% { opacity: 0; transform: translateY(20px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes slow-zoom {
          0% { transform: scale(1.0); }
          100% { transform: scale(1.1); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        .animate-slow-zoom {
          animation: slow-zoom 20s linear infinite alternate;
        }
      `}</style>
    </div>
  );
};

export default App;